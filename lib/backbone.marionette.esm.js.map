{"version":3,"file":null,"sources":["../src/utils/proxy.js","../src/utils/extend.js","../src/utils/deprecate.js","../src/common/is-node-attached.js","../src/common/merge-options.js","../src/common/get-option.js","../src/common/normalize-methods.js","../src/common/trigger-method.js","../src/common/monitor-view-events.js","../src/error.js","../src/common/bind-events.js","../src/common/bind-requests.js","../src/utils/set-options.js","../src/mixins/common.js","../src/mixins/radio.js","../src/object.js","../src/mixins/dom.js","../src/template-cache.js","../src/utils/invoke.js","../src/mixins/behaviors.js","../src/mixins/delegate-entity-events.js","../src/utils/get-unique-event-name.js","../src/config/features.js","../src/mixins/triggers.js","../src/mixins/ui.js","../src/mixins/view.js","../src/common/view.js","../src/region.js","../src/common/build-region.js","../src/mixins/regions.js","../src/config/renderer.js","../src/view.js","../src/utils/emulate-collection.js","../src/child-view-container.js","../src/collection-view.js","../src/next-child-view-container.js","../src/next-collection-view.js","../src/composite-view.js","../src/behavior.js","../src/application.js","../src/app-router.js","../src/config/behaviors-lookup.js","../src/backbone.marionette.js"],"sourcesContent":["//Internal utility for creating context style global utils\r\nconst proxy = function(method) {\r\n  return function(context, ...args) {\r\n    return method.apply(context, args);\r\n  };\r\n};\r\n\r\nexport default proxy;\r\n","// Marionette.extend\r\n// -----------------\r\n\r\nimport Backbone from 'backbone';\r\n\r\n// Borrow the Backbone `extend` method so we can use it as needed\r\nconst extend = Backbone.Model.extend;\r\n\r\nexport default extend;\r\n","/* global console */\r\n\r\nimport _ from 'underscore';\r\n\r\nimport Marionette from '../backbone.marionette';\r\n\r\nconst deprecate = function(message, test) {\r\n  if (_.isObject(message)) {\r\n    message = (\r\n      message.prev + ' is going to be removed in the future. ' +\r\n      'Please use ' + message.next + ' instead.' +\r\n      (message.url ? ' See: ' + message.url : '')\r\n    );\r\n  }\r\n\r\n  if (!Marionette.DEV_MODE) {\r\n    return;\r\n  }\r\n\r\n  if ((test === undefined || !test) && !deprecate._cache[message]) {\r\n    deprecate._warn('Deprecation warning: ' + message);\r\n    deprecate._cache[message] = true;\r\n  }\r\n};\r\n\r\ndeprecate._console = typeof console !== 'undefined' ? console : {};\r\ndeprecate._warn = function() {\r\n  const warn = deprecate._console.warn || deprecate._console.log || _.noop;\r\n  return warn.apply(deprecate._console, arguments);\r\n};\r\ndeprecate._cache = {};\r\n\r\nexport default deprecate;\r\n","// Marionette.isNodeAttached\r\n// -------------------------\r\n\r\n// Determine if `el` is a child of the document\r\nconst isNodeAttached = function(el) {\r\n  return document.documentElement.contains(el && el.parentNode);\r\n};\r\n\r\nexport default isNodeAttached;\r\n","import _ from 'underscore';\r\n\r\n// Merge `keys` from `options` onto `this`\r\nconst mergeOptions = function(options, keys) {\r\n  if (!options) { return; }\r\n\r\n  _.each(keys, (key) => {\r\n    const option = options[key];\r\n    if (option !== undefined) {\r\n      this[key] = option;\r\n    }\r\n  });\r\n};\r\n\r\nexport default mergeOptions;\r\n","// Marionette.getOption\r\n// --------------------\r\n\r\n// Retrieve an object, function or other value from the\r\n// object or its `options`, with `options` taking precedence.\r\nconst getOption = function(optionName) {\r\n  if (!optionName) { return; }\r\n  if (this.options && (this.options[optionName] !== undefined)) {\r\n    return this.options[optionName];\r\n  } else {\r\n    return this[optionName];\r\n  }\r\n};\r\n\r\nexport default getOption;\r\n","import _ from 'underscore';\r\n\r\n// Marionette.normalizeMethods\r\n// ----------------------\r\n\r\n// Pass in a mapping of events => functions or function names\r\n// and return a mapping of events => functions\r\nconst normalizeMethods = function(hash) {\r\n  return _.reduce(hash, (normalizedHash, method, name) => {\r\n    if (!_.isFunction(method)) {\r\n      method = this[method];\r\n    }\r\n    if (method) {\r\n      normalizedHash[name] = method;\r\n    }\r\n    return normalizedHash;\r\n  }, {});\r\n};\r\n\r\nexport default normalizeMethods;\r\n","// Trigger Method\r\n// --------------\r\n\r\nimport _ from 'underscore';\r\nimport getOption from './get-option';\r\n\r\n// split the event name on the \":\"\r\nconst splitter = /(^|:)(\\w)/gi;\r\n\r\n// take the event section (\"section1:section2:section3\")\r\n// and turn it in to uppercase name onSection1Section2Section3\r\nfunction getEventName(match, prefix, eventName) {\r\n  return eventName.toUpperCase();\r\n}\r\n\r\nconst getOnMethodName = _.memoize(function(event) {\r\n  return 'on' + event.replace(splitter, getEventName);\r\n});\r\n\r\n// Trigger an event and/or a corresponding method name. Examples:\r\n//\r\n// `this.triggerMethod(\"foo\")` will trigger the \"foo\" event and\r\n// call the \"onFoo\" method.\r\n//\r\n// `this.triggerMethod(\"foo:bar\")` will trigger the \"foo:bar\" event and\r\n// call the \"onFooBar\" method.\r\nexport function triggerMethod(event, ...args) {\r\n  // get the method name from the event name\r\n  const methodName = getOnMethodName(event);\r\n  const method = getOption.call(this, methodName);\r\n  let result;\r\n\r\n  // call the onMethodName if it exists\r\n  if (_.isFunction(method)) {\r\n    // pass all args, except the event name\r\n    result = method.apply(this, args);\r\n  }\r\n\r\n  // trigger the event\r\n  this.trigger.apply(this, arguments);\r\n\r\n  return result;\r\n}\r\n\r\n// triggerMethodOn invokes triggerMethod on a specific context\r\n//\r\n// e.g. `Marionette.triggerMethodOn(view, 'show')`\r\n// will trigger a \"show\" event or invoke onShow the view.\r\nexport function triggerMethodOn(context, ...args) {\r\n  if (_.isFunction(context.triggerMethod)) {\r\n    return context.triggerMethod.apply(context, args);\r\n  }\r\n\r\n  return triggerMethod.apply(context, args);\r\n}\r\n","// DOM Refresh\r\n// -----------\r\n\r\nimport _ from 'underscore';\r\nimport { triggerMethodOn } from './trigger-method';\r\n\r\n// Trigger method on children unless a pure Backbone.View\r\nfunction triggerMethodChildren(view, event, shouldTrigger) {\r\n  if (!view._getImmediateChildren) { return; }\r\n  _.each(view._getImmediateChildren(), child => {\r\n    if (!shouldTrigger(child)) { return; }\r\n    triggerMethodOn(child, event, child);\r\n  });\r\n}\r\n\r\nfunction shouldTriggerAttach(view) {\r\n  return !view._isAttached;\r\n}\r\n\r\nfunction shouldAttach(view) {\r\n  if (!shouldTriggerAttach(view)) { return false; }\r\n  view._isAttached = true;\r\n  return true;\r\n}\r\n\r\nfunction shouldTriggerDetach(view) {\r\n  return view._isAttached;\r\n}\r\n\r\nfunction shouldDetach(view) {\r\n  if (!shouldTriggerDetach(view)) { return false; }\r\n  view._isAttached = false;\r\n  return true;\r\n}\r\n\r\nfunction triggerDOMRefresh(view) {\r\n  if (view._isAttached && view._isRendered) {\r\n    triggerMethodOn(view, 'dom:refresh', view);\r\n  }\r\n}\r\n\r\nfunction triggerDOMRemove(view) {\r\n  if (view._isAttached && view._isRendered) {\r\n    triggerMethodOn(view, 'dom:remove', view);\r\n  }\r\n}\r\n\r\nfunction handleBeforeAttach() {\r\n  triggerMethodChildren(this, 'before:attach', shouldTriggerAttach);\r\n}\r\n\r\nfunction handleAttach() {\r\n  triggerMethodChildren(this, 'attach', shouldAttach);\r\n  triggerDOMRefresh(this);\r\n}\r\n\r\nfunction handleBeforeDetach() {\r\n  triggerMethodChildren(this, 'before:detach', shouldTriggerDetach);\r\n  triggerDOMRemove(this);\r\n}\r\n\r\nfunction handleDetach() {\r\n  triggerMethodChildren(this, 'detach', shouldDetach);\r\n}\r\n\r\nfunction handleBeforeRender() {\r\n  triggerDOMRemove(this);\r\n}\r\n\r\nfunction handleRender() {\r\n  triggerDOMRefresh(this);\r\n}\r\n\r\n// Monitor a view's state, propagating attach/detach events to children and firing dom:refresh\r\n// whenever a rendered view is attached or an attached view is rendered.\r\nfunction monitorViewEvents(view) {\r\n  if (view._areViewEventsMonitored) { return; }\r\n\r\n  view._areViewEventsMonitored = true;\r\n\r\n  view.on({\r\n    'before:attach': handleBeforeAttach,\r\n    'attach': handleAttach,\r\n    'before:detach': handleBeforeDetach,\r\n    'detach': handleDetach,\r\n    'before:render': handleBeforeRender,\r\n    'render': handleRender\r\n  });\r\n}\r\n\r\nexport default monitorViewEvents;\r\n","// Error\r\n// -----\r\n\r\nimport _ from 'underscore';\r\nimport extend from './utils/extend';\r\nimport {version} from '../package.json';\r\n\r\nconst errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];\r\n\r\nconst MarionetteError = extend.call(Error, {\r\n  urlRoot: `http://marionettejs.com/docs/v${version}/`,\r\n\r\n  constructor(message, options) {\r\n    if (_.isObject(message)) {\r\n      options = message;\r\n      message = options.message;\r\n    } else if (!options) {\r\n      options = {};\r\n    }\r\n\r\n    const error = Error.call(this, message);\r\n    _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));\r\n\r\n    this.captureStackTrace();\r\n\r\n    if (options.url) {\r\n      this.url = this.urlRoot + options.url;\r\n    }\r\n  },\r\n\r\n  captureStackTrace() {\r\n    if (Error.captureStackTrace) {\r\n      Error.captureStackTrace(this, MarionetteError);\r\n    }\r\n  },\r\n\r\n  toString() {\r\n    return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');\r\n  }\r\n});\r\n\r\nMarionetteError.extend = extend;\r\n\r\nexport default MarionetteError;\r\n","// Bind Entity Events & Unbind Entity Events\r\n// -----------------------------------------\r\n//\r\n// These methods are used to bind/unbind a backbone \"entity\" (e.g. collection/model)\r\n// to methods on a target object.\r\n//\r\n// The first parameter, `target`, must have the Backbone.Events module mixed in.\r\n//\r\n// The second parameter is the `entity` (Backbone.Model, Backbone.Collection or\r\n// any object that has Backbone.Events mixed in) to bind the events from.\r\n//\r\n// The third parameter is a hash of { \"event:name\": \"eventHandler\" }\r\n// configuration. Multiple handlers can be separated by a space. A\r\n// function can be supplied instead of a string handler name.\r\n\r\nimport _ from 'underscore';\r\nimport MarionetteError from '../error';\r\n\r\n// Bind/unbind the event to handlers specified as a string of\r\n// handler names on the target object\r\nfunction bindFromStrings(target, entity, evt, methods, actionName) {\r\n  const methodNames = methods.split(/\\s+/);\r\n\r\n  _.each(methodNames, function(methodName) {\r\n    const method = target[methodName];\r\n    if (!method) {\r\n      throw new MarionetteError(`Method \"${methodName}\" was configured as an event handler, but does not exist.`);\r\n    }\r\n\r\n    target[actionName](entity, evt, method);\r\n  });\r\n}\r\n\r\n// generic looping function\r\nfunction iterateEvents(target, entity, bindings, actionName) {\r\n  if (!entity || !bindings) { return; }\r\n\r\n  // type-check bindings\r\n  if (!_.isObject(bindings)) {\r\n    throw new MarionetteError({\r\n      message: 'Bindings must be an object.',\r\n      url: 'marionette.functions.html#marionettebindevents'\r\n    });\r\n  }\r\n\r\n  // iterate the bindings and bind/unbind them\r\n  _.each(bindings, function(method, evt) {\r\n\r\n    // allow for a list of method names as a string\r\n    if (_.isString(method)) {\r\n      bindFromStrings(target, entity, evt, method, actionName);\r\n      return;\r\n    }\r\n\r\n    target[actionName](entity, evt, method);\r\n  });\r\n}\r\n\r\nfunction bindEvents(entity, bindings) {\r\n  iterateEvents(this, entity, bindings, 'listenTo');\r\n  return this;\r\n}\r\n\r\nfunction unbindEvents(entity, bindings) {\r\n  iterateEvents(this, entity, bindings, 'stopListening');\r\n  return this;\r\n}\r\n\r\n// Export Public API\r\nexport {\r\n  bindEvents,\r\n  unbindEvents\r\n};\r\n","// Bind/Unbind Radio Requests\r\n// -----------------------------------------\r\n//\r\n// These methods are used to bind/unbind a backbone.radio request\r\n// to methods on a target object.\r\n//\r\n// The first parameter, `target`, will set the context of the reply method\r\n//\r\n// The second parameter is the `Radio.channel` to bind the reply to.\r\n//\r\n// The third parameter is a hash of { \"request:name\": \"replyHandler\" }\r\n// configuration. A function can be supplied instead of a string handler name.\r\n\r\nimport _ from 'underscore';\r\nimport normalizeMethods from './normalize-methods';\r\nimport MarionetteError from '../error';\r\n\r\nfunction iterateReplies(target, channel, bindings, actionName) {\r\n  if (!channel || !bindings) { return; }\r\n\r\n  // type-check bindings\r\n  if (!_.isObject(bindings)) {\r\n    throw new MarionetteError({\r\n      message: 'Bindings must be an object.',\r\n      url: 'marionette.functions.html#marionettebindrequests'\r\n    });\r\n  }\r\n\r\n  const normalizedRadioRequests = normalizeMethods.call(target, bindings);\r\n\r\n  channel[actionName](normalizedRadioRequests, target);\r\n}\r\n\r\nfunction bindRequests(channel, bindings) {\r\n  iterateReplies(this, channel, bindings, 'reply');\r\n  return this;\r\n}\r\n\r\nfunction unbindRequests(channel, bindings) {\r\n  iterateReplies(this, channel, bindings, 'stopReplying');\r\n  return this;\r\n}\r\n\r\nexport {\r\n  bindRequests,\r\n  unbindRequests\r\n};\r\n","import _ from 'underscore';\r\n\r\n// Internal utility for setting options consistently across Mn\r\nconst setOptions = function(options) {\r\n  this.options = _.extend({}, _.result(this, 'options'), options);\r\n};\r\n\r\nexport default setOptions;\r\n","import _setOptions from '../utils/set-options';\r\nimport getOption from '../common/get-option';\r\nimport mergeOptions from '../common/merge-options';\r\nimport normalizeMethods from '../common/normalize-methods';\r\nimport {\r\n  bindEvents,\r\n  unbindEvents\r\n} from '../common/bind-events';\r\n\r\nexport default {\r\n\r\n  // Imports the \"normalizeMethods\" to transform hashes of\r\n  // events=>function references/names to a hash of events=>function references\r\n  normalizeMethods,\r\n\r\n  _setOptions,\r\n\r\n  // A handy way to merge passed-in options onto the instance\r\n  mergeOptions,\r\n\r\n  // Enable getting options from this or this.options by name.\r\n  getOption,\r\n\r\n  // Enable binding view's events from another entity.\r\n  bindEvents,\r\n\r\n  // Enable unbinding view's events from another entity.\r\n  unbindEvents\r\n};\r\n","import _ from 'underscore';\r\nimport Radio from 'backbone.radio';\r\n\r\nimport {\r\n  bindRequests,\r\n  unbindRequests\r\n} from '../common/bind-requests';\r\n\r\nimport {\r\n  bindEvents,\r\n  unbindEvents\r\n} from '../common/bind-events';\r\n\r\nimport MarionetteError from '../error';\r\n\r\n// MixinOptions\r\n// - channelName\r\n// - radioEvents\r\n// - radioRequests\r\n\r\nexport default {\r\n\r\n  _initRadio() {\r\n    const channelName = _.result(this, 'channelName');\r\n\r\n    if (!channelName) {\r\n      return;\r\n    }\r\n\r\n    /* istanbul ignore next */\r\n    if (!Radio) {\r\n      throw new MarionetteError({\r\n        name: 'BackboneRadioMissing',\r\n        message: 'The dependency \"backbone.radio\" is missing.'\r\n      });\r\n    }\r\n\r\n    const channel = this._channel = Radio.channel(channelName);\r\n\r\n    const radioEvents = _.result(this, 'radioEvents');\r\n    this.bindEvents(channel, radioEvents);\r\n\r\n    const radioRequests = _.result(this, 'radioRequests');\r\n    this.bindRequests(channel, radioRequests);\r\n\r\n    this.on('destroy', this._destroyRadio);\r\n  },\r\n\r\n  _destroyRadio() {\r\n    this._channel.stopReplying(null, null, this);\r\n  },\r\n\r\n  getChannel() {\r\n    return this._channel;\r\n  },\r\n\r\n  // Proxy `bindEvents`\r\n  bindEvents: bindEvents,\r\n\r\n  // Proxy `unbindEvents`\r\n  unbindEvents: unbindEvents,\r\n\r\n  // Proxy `bindRequests`\r\n  bindRequests: bindRequests,\r\n\r\n  // Proxy `unbindRequests`\r\n  unbindRequests: unbindRequests\r\n\r\n};\r\n","// Object\r\n// ------\r\n\r\nimport _ from 'underscore';\r\nimport Backbone from 'backbone';\r\nimport extend from './utils/extend';\r\nimport { triggerMethod } from './common/trigger-method';\r\nimport CommonMixin from './mixins/common';\r\nimport RadioMixin from './mixins/radio';\r\n\r\nconst ClassOptions = [\r\n  'channelName',\r\n  'radioEvents',\r\n  'radioRequests'\r\n];\r\n\r\n// A Base Class that other Classes should descend from.\r\n// Object borrows many conventions and utilities from Backbone.\r\nconst MarionetteObject = function(options) {\r\n  if (!this.hasOwnProperty('options')) {\r\n    this._setOptions(options);\r\n  }\r\n  this.mergeOptions(options, ClassOptions);\r\n  this._setCid();\r\n  this._initRadio();\r\n  this.initialize.apply(this, arguments);\r\n};\r\n\r\nMarionetteObject.extend = extend;\r\n\r\n// Object Methods\r\n// --------------\r\n\r\n// Ensure it can trigger events with Backbone.Events\r\n_.extend(MarionetteObject.prototype, Backbone.Events, CommonMixin, RadioMixin, {\r\n  cidPrefix: 'mno',\r\n\r\n  // for parity with Marionette.AbstractView lifecyle\r\n  _isDestroyed: false,\r\n\r\n  isDestroyed() {\r\n    return this._isDestroyed;\r\n  },\r\n\r\n  //this is a noop method intended to be overridden by classes that extend from this base\r\n  initialize() {},\r\n\r\n  _setCid() {\r\n    if (this.cid) { return; }\r\n    this.cid = _.uniqueId(this.cidPrefix);\r\n  },\r\n\r\n  destroy(...args) {\r\n    if (this._isDestroyed) { return this; }\r\n\r\n    this.triggerMethod('before:destroy', this, ...args);\r\n\r\n    this._isDestroyed = true;\r\n    this.triggerMethod('destroy', this, ...args);\r\n    this.stopListening();\r\n\r\n    return this;\r\n  },\r\n\r\n  triggerMethod\r\n});\r\n\r\nexport default MarionetteObject;\r\n","// DomMixin\r\n//  ---------\r\n\r\nimport Backbone from 'backbone';\r\n\r\nexport default {\r\n  createBuffer() {\r\n    return document.createDocumentFragment();\r\n  },\r\n\r\n  appendChildren(el, children) {\r\n    Backbone.$(el).append(children);\r\n  },\r\n\r\n  beforeEl(el, sibling) {\r\n    Backbone.$(el).before(sibling);\r\n  },\r\n\r\n  replaceEl(newEl, oldEl) {\r\n    if (newEl === oldEl) {\r\n      return;\r\n    }\r\n\r\n    const parent = oldEl.parentNode;\r\n\r\n    if (!parent) {\r\n      return;\r\n    }\r\n\r\n    parent.replaceChild(newEl, oldEl);\r\n  },\r\n\r\n  detachContents(el) {\r\n    Backbone.$(el).contents().detach();\r\n  },\r\n\r\n  setInnerContent(el, html) {\r\n    Backbone.$(el).html(html);\r\n  },\r\n\r\n  detachEl(el) {\r\n    Backbone.$(el).detach();\r\n  },\r\n\r\n  removeEl(el) {\r\n    Backbone.$(el).remove();\r\n  },\r\n\r\n  findEls(selector, context) {\r\n    return Backbone.$(selector, context);\r\n  }\r\n};\r\n","// Template Cache\r\n// --------------\r\n\r\nimport _ from 'underscore';\r\nimport DomMixin from './mixins/dom';\r\nimport MarionetteError from './error';\r\n\r\n// Manage templates stored in `<script>` blocks,\r\n// caching them for faster access.\r\nconst TemplateCache = function(templateId) {\r\n  this.templateId = templateId;\r\n};\r\n\r\n// TemplateCache object-level methods. Manage the template\r\n// caches from these method calls instead of creating\r\n// your own TemplateCache instances\r\n_.extend(TemplateCache, {\r\n  templateCaches: {},\r\n\r\n  // Get the specified template by id. Either\r\n  // retrieves the cached version, or loads it\r\n  // from the DOM.\r\n  get(templateId, options) {\r\n    let cachedTemplate = this.templateCaches[templateId];\r\n\r\n    if (!cachedTemplate) {\r\n      cachedTemplate = new TemplateCache(templateId);\r\n      this.templateCaches[templateId] = cachedTemplate;\r\n    }\r\n\r\n    return cachedTemplate.load(options);\r\n  },\r\n\r\n  // Clear templates from the cache. If no arguments\r\n  // are specified, clears all templates:\r\n  // `clear()`\r\n  //\r\n  // If arguments are specified, clears each of the\r\n  // specified templates from the cache:\r\n  // `clear(\"#t1\", \"#t2\", \"...\")`\r\n  clear(...args) {\r\n    let i;\r\n    const length = args.length;\r\n\r\n    if (length > 0) {\r\n      for (i = 0; i < length; i++) {\r\n        delete this.templateCaches[args[i]];\r\n      }\r\n    } else {\r\n      this.templateCaches = {};\r\n    }\r\n  }\r\n});\r\n\r\n// TemplateCache instance methods, allowing each\r\n// template cache object to manage its own state\r\n// and know whether or not it has been loaded\r\n_.extend(TemplateCache.prototype, DomMixin, {\r\n\r\n  // Internal method to load the template\r\n  load(options) {\r\n    // Guard clause to prevent loading this template more than once\r\n    if (this.compiledTemplate) {\r\n      return this.compiledTemplate;\r\n    }\r\n\r\n    // Load the template and compile it\r\n    const template = this.loadTemplate(this.templateId, options);\r\n    this.compiledTemplate = this.compileTemplate(template, options);\r\n\r\n    return this.compiledTemplate;\r\n  },\r\n\r\n  // Load a template from the DOM, by default. Override\r\n  // this method to provide your own template retrieval\r\n  // For asynchronous loading with AMD/RequireJS, consider\r\n  // using a template-loader plugin as described here:\r\n  // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs\r\n  loadTemplate(templateId, options) {\r\n    const $template = this.findEls(templateId);\r\n\r\n    if (!$template.length) {\r\n      throw new MarionetteError({\r\n        name: 'NoTemplateError',\r\n        message: `Could not find template: \"${templateId}\"`\r\n      });\r\n    }\r\n    return $template.html();\r\n  },\r\n\r\n  // Pre-compile the template before caching it. Override\r\n  // this method if you do not need to pre-compile a template\r\n  // (JST / RequireJS for example) or if you want to change\r\n  // the template engine used (Handebars, etc).\r\n  compileTemplate(rawTemplate, options) {\r\n    return _.template(rawTemplate, options);\r\n  }\r\n});\r\n\r\nexport default TemplateCache;\r\n","// Implementation of the invoke method (http://underscorejs.org/#invoke) with support for\r\n// lodash v3, v4, and underscore.js\r\nimport _ from 'underscore';\r\n\r\nexport default _.invokeMap || _.invoke;\r\n","import _ from 'underscore';\r\nimport _invoke from '../utils/invoke';\r\nimport { triggerMethod } from '../common/trigger-method';\r\nimport Marionette from '../backbone.marionette';\r\n\r\n// MixinOptions\r\n// - behaviors\r\n\r\n// Takes care of getting the behavior class\r\n// given options and a key.\r\n// If a user passes in options.behaviorClass\r\n// default to using that.\r\n// If a user passes in a Behavior Class directly, use that\r\n// Otherwise delegate the lookup to the users `behaviorsLookup` implementation.\r\nfunction getBehaviorClass(options, key) {\r\n  if (options.behaviorClass) {\r\n    return options.behaviorClass;\r\n    //treat functions as a Behavior constructor\r\n  } else if (_.isFunction(options)) {\r\n    return options;\r\n  }\r\n\r\n  // behaviorsLookup can be either a flat object or a method\r\n  if (_.isFunction(Marionette.Behaviors.behaviorsLookup)) {\r\n    return Marionette.Behaviors.behaviorsLookup(options, key)[key];\r\n  }\r\n\r\n  return Marionette.Behaviors.behaviorsLookup[key];\r\n}\r\n\r\n// Iterate over the behaviors object, for each behavior\r\n// instantiate it and get its grouped behaviors.\r\n// This accepts a list of behaviors in either an object or array form\r\nfunction parseBehaviors(view, behaviors) {\r\n  return _.chain(behaviors).map(function(options, key) {\r\n    const BehaviorClass = getBehaviorClass(options, key);\r\n    //if we're passed a class directly instead of an object\r\n    const _options = options === BehaviorClass ? {} : options;\r\n    const behavior = new BehaviorClass(_options, view);\r\n    const nestedBehaviors = parseBehaviors(view, _.result(behavior, 'behaviors'));\r\n\r\n    return [behavior].concat(nestedBehaviors);\r\n  }).flatten().value();\r\n}\r\n\r\nexport default {\r\n  _initBehaviors() {\r\n    this._behaviors = this._getBehaviors();\r\n  },\r\n\r\n  _getBehaviors() {\r\n    const behaviors = _.result(this, 'behaviors');\r\n\r\n    // Behaviors defined on a view can be a flat object literal\r\n    // or it can be a function that returns an object.\r\n    return _.isObject(behaviors) ? parseBehaviors(this, behaviors) : {};\r\n  },\r\n\r\n  _getBehaviorTriggers() {\r\n    const triggers = _invoke(this._behaviors, 'getTriggers');\r\n    return _.reduce(triggers, function(memo, _triggers) {\r\n      return _.extend(memo, _triggers);\r\n    }, {});\r\n  },\r\n\r\n  _getBehaviorEvents() {\r\n    const events = _invoke(this._behaviors, 'getEvents');\r\n    return _.reduce(events, function(memo, _events) {\r\n      return _.extend(memo, _events);\r\n    }, {});\r\n  },\r\n\r\n  // proxy behavior $el to the view's $el.\r\n  _proxyBehaviorViewProperties() {\r\n    _invoke(this._behaviors, 'proxyViewProperties');\r\n  },\r\n\r\n  // delegate modelEvents and collectionEvents\r\n  _delegateBehaviorEntityEvents() {\r\n    _invoke(this._behaviors, 'delegateEntityEvents');\r\n  },\r\n\r\n  // undelegate modelEvents and collectionEvents\r\n  _undelegateBehaviorEntityEvents() {\r\n    _invoke(this._behaviors, 'undelegateEntityEvents');\r\n  },\r\n\r\n  _destroyBehaviors(...args) {\r\n    // Call destroy on each behavior after\r\n    // destroying the view.\r\n    // This unbinds event listeners\r\n    // that behaviors have registered for.\r\n    _invoke(this._behaviors, 'destroy', ...args);\r\n  },\r\n\r\n  // Remove a behavior\r\n  _removeBehavior(behavior) {\r\n    // Don't worry about the clean up if the view is destroyed\r\n    if (this._isDestroyed) { return; }\r\n    this._behaviors = _.without(this._behaviors, behavior);\r\n  },\r\n\r\n  _bindBehaviorUIElements() {\r\n    _invoke(this._behaviors, 'bindUIElements');\r\n  },\r\n\r\n  _unbindBehaviorUIElements() {\r\n    _invoke(this._behaviors, 'unbindUIElements');\r\n  },\r\n\r\n  _triggerEventOnBehaviors() {\r\n    const behaviors = this._behaviors;\r\n    // Use good ol' for as this is a very hot function\r\n    for (let i = 0, length = behaviors && behaviors.length; i < length; i++) {\r\n      triggerMethod.apply(behaviors[i], arguments);\r\n    }\r\n  }\r\n};\r\n","import _ from 'underscore';\r\n\r\nimport {\r\n  bindEvents,\r\n  unbindEvents\r\n} from '../common/bind-events';\r\n\r\n// MixinOptions\r\n// - collectionEvents\r\n// - modelEvents\r\n\r\nexport default {\r\n  // Handle `modelEvents`, and `collectionEvents` configuration\r\n  _delegateEntityEvents(model, collection) {\r\n    this._undelegateEntityEvents(model, collection);\r\n\r\n    const modelEvents = _.result(this, 'modelEvents');\r\n    bindEvents.call(this, model, modelEvents);\r\n\r\n    const collectionEvents = _.result(this, 'collectionEvents');\r\n    bindEvents.call(this, collection, collectionEvents);\r\n  },\r\n\r\n  _undelegateEntityEvents(model, collection) {\r\n    const modelEvents = _.result(this, 'modelEvents');\r\n    unbindEvents.call(this, model, modelEvents);\r\n\r\n    const collectionEvents = _.result(this, 'collectionEvents');\r\n    unbindEvents.call(this, collection, collectionEvents);\r\n  }\r\n};\r\n","import _ from 'underscore';\r\n\r\n// Borrow event splitter from Backbone\r\nconst delegateEventSplitter = /^(\\S+)\\s*(.*)$/;\r\n\r\nfunction uniqueName(eventName, selector) {\r\n  return [eventName + _.uniqueId('.evt'), selector].join(' ');\r\n}\r\n\r\n// Set event name to be namespaced using a unique index\r\n// to generate a non colliding event namespace\r\n// http://api.jquery.com/event.namespace/\r\nconst getUniqueEventName = function(eventName) {\r\n  const match = eventName.match(delegateEventSplitter);\r\n  return uniqueName(match[1], match[2]);\r\n};\r\n\r\nexport default getUniqueEventName;\r\n","// Add Feature flags here\r\n// e.g. 'class' => false\r\nconst FEATURES = {\r\n  childViewEventPrefix: true,\r\n  triggersStopPropagation: true,\r\n  triggersPreventDefault: true\r\n};\r\n\r\nfunction isEnabled(name) {\r\n  return !!FEATURES[name];\r\n}\r\n\r\nfunction setEnabled(name, state) {\r\n  return FEATURES[name] = state;\r\n}\r\n\r\nexport {\r\n  FEATURES,\r\n  setEnabled,\r\n  isEnabled\r\n};\r\n","import _ from 'underscore';\r\nimport getUniqueEventName from '../utils/get-unique-event-name';\r\nimport { isEnabled } from '../config/features';\r\n\r\n// Internal method to create an event handler for a given `triggerDef` like\r\n// 'click:foo'\r\nfunction buildViewTrigger(view, triggerDef) {\r\n  if (_.isString(triggerDef)) {\r\n    triggerDef = {event: triggerDef};\r\n  }\r\n\r\n  const eventName = triggerDef.event;\r\n\r\n  let shouldPreventDefault = !!triggerDef.preventDefault;\r\n\r\n  if (isEnabled('triggersPreventDefault')) {\r\n    shouldPreventDefault = triggerDef.preventDefault !== false;\r\n  }\r\n\r\n  let shouldStopPropagation = !!triggerDef.stopPropagation;\r\n\r\n  if (isEnabled('triggersStopPropagation')) {\r\n    shouldStopPropagation = triggerDef.stopPropagation !== false;\r\n  }\r\n\r\n  return function(event) {\r\n    if (shouldPreventDefault) {\r\n      event.preventDefault();\r\n    }\r\n\r\n    if (shouldStopPropagation) {\r\n      event.stopPropagation();\r\n    }\r\n\r\n    view.triggerMethod(eventName, view, event);\r\n  };\r\n}\r\n\r\nexport default {\r\n\r\n  // Configure `triggers` to forward DOM events to view\r\n  // events. `triggers: {\"click .foo\": \"do:foo\"}`\r\n  _getViewTriggers(view, triggers) {\r\n    // Configure the triggers, prevent default\r\n    // action and stop propagation of DOM events\r\n    return _.reduce(triggers, (events, value, key) => {\r\n      key = getUniqueEventName(key);\r\n      events[key] = buildViewTrigger(view, value);\r\n      return events;\r\n    }, {});\r\n  }\r\n\r\n};\r\n","import _ from 'underscore';\r\n// allows for the use of the @ui. syntax within\r\n// a given key for triggers and events\r\n// swaps the @ui with the associated selector.\r\n// Returns a new, non-mutated, parsed events hash.\r\nconst normalizeUIKeys = function(hash, ui) {\r\n  return _.reduce(hash, (memo, val, key) => {\r\n    const normalizedKey = normalizeUIString(key, ui);\r\n    memo[normalizedKey] = val;\r\n    return memo;\r\n  }, {});\r\n};\r\n\r\n// utility method for parsing @ui. syntax strings\r\n// into associated selector\r\nconst normalizeUIString = function(uiString, ui) {\r\n  return uiString.replace(/@ui\\.[a-zA-Z-_$0-9]*/g, (r) => {\r\n    return ui[r.slice(4)];\r\n  });\r\n};\r\n\r\n// allows for the use of the @ui. syntax within\r\n// a given value for regions\r\n// swaps the @ui with the associated selector\r\nconst normalizeUIValues = function(hash, ui, properties) {\r\n  _.each(hash, (val, key) => {\r\n    if (_.isString(val)) {\r\n      hash[key] = normalizeUIString(val, ui);\r\n    } else if (_.isObject(val) && _.isArray(properties)) {\r\n      _.extend(val, normalizeUIValues(_.pick(val, properties), ui));\r\n      /* Value is an object, and we got an array of embedded property names to normalize. */\r\n      _.each(properties, (property) => {\r\n        const propertyVal = val[property];\r\n        if (_.isString(propertyVal)) {\r\n          val[property] = normalizeUIString(propertyVal, ui);\r\n        }\r\n      });\r\n    }\r\n  });\r\n  return hash;\r\n};\r\n\r\nexport default {\r\n\r\n  // normalize the keys of passed hash with the views `ui` selectors.\r\n  // `{\"@ui.foo\": \"bar\"}`\r\n  normalizeUIKeys(hash) {\r\n    const uiBindings = this._getUIBindings();\r\n    return normalizeUIKeys(hash, uiBindings);\r\n  },\r\n\r\n  // normalize the passed string with the views `ui` selectors.\r\n  // `\"@ui.bar\"`\r\n  normalizeUIString(uiString) {\r\n    const uiBindings = this._getUIBindings();\r\n    return normalizeUIString(uiString, uiBindings);\r\n  },\r\n\r\n  // normalize the values of passed hash with the views `ui` selectors.\r\n  // `{foo: \"@ui.bar\"}`\r\n  normalizeUIValues(hash, properties) {\r\n    const uiBindings = this._getUIBindings();\r\n    return normalizeUIValues(hash, uiBindings, properties);\r\n  },\r\n\r\n  _getUIBindings() {\r\n    const uiBindings = _.result(this, '_uiBindings');\r\n    const ui = _.result(this, 'ui');\r\n    return uiBindings || ui;\r\n  },\r\n\r\n  // This method binds the elements specified in the \"ui\" hash inside the view's code with\r\n  // the associated jQuery selectors.\r\n  _bindUIElements() {\r\n    if (!this.ui) { return; }\r\n\r\n    // store the ui hash in _uiBindings so they can be reset later\r\n    // and so re-rendering the view will be able to find the bindings\r\n    if (!this._uiBindings) {\r\n      this._uiBindings = this.ui;\r\n    }\r\n\r\n    // get the bindings result, as a function or otherwise\r\n    const bindings = _.result(this, '_uiBindings');\r\n\r\n    // empty the ui so we don't have anything to start with\r\n    this._ui = {};\r\n\r\n    // bind each of the selectors\r\n    _.each(bindings, (selector, key) => {\r\n      this._ui[key] = this.$(selector);\r\n    });\r\n\r\n    this.ui = this._ui;\r\n  },\r\n\r\n  _unbindUIElements() {\r\n    if (!this.ui || !this._uiBindings) { return; }\r\n\r\n    // delete all of the existing ui bindings\r\n    _.each(this.ui, ($el, name) => {\r\n      delete this.ui[name];\r\n    });\r\n\r\n    // reset the ui element to the original bindings configuration\r\n    this.ui = this._uiBindings;\r\n    delete this._uiBindings;\r\n    delete this._ui;\r\n  },\r\n\r\n  _getUI(name) {\r\n    return this._ui[name];\r\n  }\r\n};\r\n","// ViewMixin\r\n//  ---------\r\n\r\nimport Backbone from 'backbone';\r\nimport _ from 'underscore';\r\nimport { triggerMethod } from '../common/trigger-method';\r\nimport BehaviorsMixin from './behaviors';\r\nimport CommonMixin from './common';\r\nimport DelegateEntityEventsMixin from './delegate-entity-events';\r\nimport DomMixin from './dom';\r\nimport TriggersMixin from './triggers';\r\nimport UIMixin from './ui';\r\nimport { isEnabled } from '../config/features';\r\n\r\n// MixinOptions\r\n// - behaviors\r\n// - childViewEventPrefix\r\n// - childViewEvents\r\n// - childViewTriggers\r\n// - collectionEvents\r\n// - modelEvents\r\n// - triggers\r\n// - ui\r\n\r\n\r\nconst ViewMixin = {\r\n  supportsRenderLifecycle: true,\r\n  supportsDestroyLifecycle: true,\r\n\r\n  _isDestroyed: false,\r\n\r\n  isDestroyed() {\r\n    return !!this._isDestroyed;\r\n  },\r\n\r\n  _isRendered: false,\r\n\r\n  isRendered() {\r\n    return !!this._isRendered;\r\n  },\r\n\r\n  _isAttached: false,\r\n\r\n  isAttached() {\r\n    return !!this._isAttached;\r\n  },\r\n\r\n  // Overriding Backbone.View's `delegateEvents` to handle\r\n  // `events` and `triggers`\r\n  delegateEvents(eventsArg) {\r\n\r\n    this._proxyBehaviorViewProperties();\r\n    this._buildEventProxies();\r\n\r\n    const viewEvents = this._getEvents(eventsArg);\r\n\r\n    if (typeof eventsArg === 'undefined') {\r\n      this.events = viewEvents;\r\n    }\r\n\r\n    const combinedEvents = _.extend({},\r\n      this._getBehaviorEvents(),\r\n      viewEvents,\r\n      this._getBehaviorTriggers(),\r\n      this.getTriggers()\r\n    );\r\n\r\n    Backbone.View.prototype.delegateEvents.call(this, combinedEvents);\r\n\r\n    return this;\r\n  },\r\n\r\n  _getEvents(eventsArg) {\r\n    const events = eventsArg || this.events;\r\n\r\n    if (_.isFunction(events)) {\r\n      return this.normalizeUIKeys(events.call(this));\r\n    }\r\n\r\n    return this.normalizeUIKeys(events);\r\n  },\r\n\r\n  // Configure `triggers` to forward DOM events to view\r\n  // events. `triggers: {\"click .foo\": \"do:foo\"}`\r\n  getTriggers() {\r\n    if (!this.triggers) { return; }\r\n\r\n    // Allow `triggers` to be configured as a function\r\n    const triggers = this.normalizeUIKeys(_.result(this, 'triggers'));\r\n\r\n    // Configure the triggers, prevent default\r\n    // action and stop propagation of DOM events\r\n    return this._getViewTriggers(this, triggers);\r\n  },\r\n\r\n  // Handle `modelEvents`, and `collectionEvents` configuration\r\n  delegateEntityEvents() {\r\n    this._delegateEntityEvents(this.model, this.collection);\r\n\r\n    // bind each behaviors model and collection events\r\n    this._delegateBehaviorEntityEvents();\r\n\r\n    return this;\r\n  },\r\n\r\n  // Handle unbinding `modelEvents`, and `collectionEvents` configuration\r\n  undelegateEntityEvents() {\r\n    this._undelegateEntityEvents(this.model, this.collection);\r\n\r\n    // unbind each behaviors model and collection events\r\n    this._undelegateBehaviorEntityEvents();\r\n\r\n    return this;\r\n  },\r\n\r\n  // Handle destroying the view and its children.\r\n  destroy(...args) {\r\n    if (this._isDestroyed) { return this; }\r\n    const shouldTriggerDetach = !!this._isAttached;\r\n\r\n    this.triggerMethod('before:destroy', this, ...args);\r\n    if (shouldTriggerDetach) {\r\n      this.triggerMethod('before:detach', this);\r\n    }\r\n\r\n    // unbind UI elements\r\n    this.unbindUIElements();\r\n\r\n    // remove the view from the DOM\r\n    this.removeEl(this.el);\r\n\r\n    if (shouldTriggerDetach) {\r\n      this._isAttached = false;\r\n      this.triggerMethod('detach', this);\r\n    }\r\n\r\n    // remove children after the remove to prevent extra paints\r\n    this._removeChildren();\r\n\r\n    this._isDestroyed = true;\r\n    this._isRendered = false;\r\n\r\n    // Destroy behaviors after _isDestroyed flag\r\n    this._destroyBehaviors(...args);\r\n\r\n    this.triggerMethod('destroy', this, ...args);\r\n\r\n    this.stopListening();\r\n\r\n    return this;\r\n  },\r\n\r\n  bindUIElements() {\r\n    this._bindUIElements();\r\n    this._bindBehaviorUIElements();\r\n\r\n    return this;\r\n  },\r\n\r\n  // This method unbinds the elements specified in the \"ui\" hash\r\n  unbindUIElements() {\r\n    this._unbindUIElements();\r\n    this._unbindBehaviorUIElements();\r\n\r\n    return this;\r\n  },\r\n\r\n  getUI(name) {\r\n    return this._getUI(name);\r\n  },\r\n\r\n  // used as the prefix for child view events\r\n  // that are forwarded through the layoutview\r\n  childViewEventPrefix() {\r\n    return isEnabled('childViewEventPrefix') ? 'childview' : false;\r\n  },\r\n\r\n  // import the `triggerMethod` to trigger events with corresponding\r\n  // methods if the method exists\r\n  triggerMethod() {\r\n    const ret = triggerMethod.apply(this, arguments);\r\n\r\n    this._triggerEventOnBehaviors.apply(this, arguments);\r\n\r\n    return ret;\r\n  },\r\n\r\n  // Cache `childViewEvents` and `childViewTriggers`\r\n  _buildEventProxies() {\r\n    this._childViewEvents = _.result(this, 'childViewEvents');\r\n    this._childViewTriggers = _.result(this, 'childViewTriggers');\r\n  },\r\n\r\n  _proxyChildViewEvents(view) {\r\n    this.listenTo(view, 'all', this._childViewEventHandler);\r\n  },\r\n\r\n  _childViewEventHandler(eventName, ...args) {\r\n    const childViewEvents = this.normalizeMethods(this._childViewEvents);\r\n\r\n    // call collectionView childViewEvent if defined\r\n    if (typeof childViewEvents !== 'undefined' && _.isFunction(childViewEvents[eventName])) {\r\n      childViewEvents[eventName].apply(this, args);\r\n    }\r\n\r\n    // use the parent view's proxyEvent handlers\r\n    const childViewTriggers = this._childViewTriggers;\r\n\r\n    // Call the event with the proxy name on the parent layout\r\n    if (childViewTriggers && _.isString(childViewTriggers[eventName])) {\r\n      this.triggerMethod(childViewTriggers[eventName], ...args);\r\n    }\r\n\r\n    const prefix = _.result(this, 'childViewEventPrefix');\r\n\r\n    if (prefix !== false) {\r\n      const childEventName = prefix + ':' + eventName;\r\n\r\n      this.triggerMethod(childEventName, ...args);\r\n    }\r\n  }\r\n};\r\n\r\n_.extend(ViewMixin, DomMixin, BehaviorsMixin, CommonMixin, DelegateEntityEventsMixin, TriggersMixin, UIMixin);\r\n\r\nexport default ViewMixin;\r\n","import { triggerMethodOn } from '../common/trigger-method';\r\n\r\nexport function renderView(view) {\r\n  if (view._isRendered) {\r\n    return;\r\n  }\r\n\r\n  if (!view.supportsRenderLifecycle) {\r\n    triggerMethodOn(view, 'before:render', view);\r\n  }\r\n\r\n  view.render();\r\n\r\n  if (!view.supportsRenderLifecycle) {\r\n    view._isRendered = true;\r\n    triggerMethodOn(view, 'render', view);\r\n  }\r\n}\r\n\r\nexport function destroyView(view) {\r\n  if (view.destroy) {\r\n    view.destroy();\r\n    return;\r\n  }\r\n\r\n  if (!view.supportsDestroyLifecycle) {\r\n    triggerMethodOn(view, 'before:destroy', view);\r\n  }\r\n\r\n  const shouldTriggerDetach = !!view._isAttached;\r\n\r\n  if (shouldTriggerDetach) {\r\n    triggerMethodOn(view, 'before:detach', view);\r\n  }\r\n\r\n  view.remove();\r\n\r\n  if (shouldTriggerDetach) {\r\n    view._isAttached = false;\r\n    triggerMethodOn(view, 'detach', view);\r\n  }\r\n\r\n  view._isDestroyed = true;\r\n\r\n  if (!view.supportsDestroyLifecycle) {\r\n    triggerMethodOn(view, 'destroy', view);\r\n  }\r\n}\r\n","// Region\r\n// ------\r\n\r\nimport _ from 'underscore';\r\nimport Backbone from 'backbone';\r\nimport deprecate from './utils/deprecate';\r\nimport { renderView, destroyView } from './common/view';\r\nimport monitorViewEvents from './common/monitor-view-events';\r\nimport isNodeAttached from './common/is-node-attached';\r\nimport { triggerMethodOn } from './common/trigger-method';\r\nimport DomMixin from './mixins/dom';\r\nimport MarionetteObject from './object';\r\nimport MarionetteError from './error';\r\nimport View from './view';\r\n\r\nconst ClassOptions = [\r\n  'allowMissingEl',\r\n  'parentEl',\r\n  'replaceElement'\r\n];\r\n\r\nconst Region = MarionetteObject.extend({\r\n  cidPrefix: 'mnr',\r\n  replaceElement: false,\r\n  _isReplaced: false,\r\n  _isSwappingView: false,\r\n\r\n  constructor(options) {\r\n    this._setOptions(options);\r\n\r\n    this.mergeOptions(options, ClassOptions);\r\n\r\n    // getOption necessary because options.el may be passed as undefined\r\n    this._initEl = this.el = this.getOption('el');\r\n\r\n    // Handle when this.el is passed in as a $ wrapped element.\r\n    this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;\r\n\r\n    if (!this.el) {\r\n      throw new MarionetteError({\r\n        name: 'NoElError',\r\n        message: 'An \"el\" must be specified for a region.'\r\n      });\r\n    }\r\n\r\n    this.$el = this.getEl(this.el);\r\n    MarionetteObject.call(this, options);\r\n  },\r\n\r\n  // Displays a backbone view instance inside of the region. Handles calling the `render`\r\n  // method for you. Reads content directly from the `el` attribute. The `preventDestroy`\r\n  // option can be used to prevent a view from the old view being destroyed on show.\r\n  show(view, options) {\r\n    if (!this._ensureElement(options)) {\r\n      return;\r\n    }\r\n\r\n    view = this._getView(view, options);\r\n\r\n    if (view === this.currentView) { return this; }\r\n\r\n    this._isSwappingView = !!this.currentView;\r\n\r\n    this.triggerMethod('before:show', this, view, options);\r\n\r\n    // Assume an attached view is already in the region for pre-existing DOM\r\n    if (!view._isAttached) {\r\n      this.empty(options);\r\n    }\r\n\r\n    this._setupChildView(view);\r\n\r\n    renderView(view);\r\n\r\n    this._attachView(view, options);\r\n\r\n    this.currentView = view;\r\n\r\n    this.triggerMethod('show', this, view, options);\r\n\r\n    this._isSwappingView = false;\r\n\r\n    return this;\r\n  },\r\n\r\n  _setupChildView(view) {\r\n    monitorViewEvents(view);\r\n\r\n    this._proxyChildViewEvents(view);\r\n\r\n    // We need to listen for if a view is destroyed in a way other than through the region.\r\n    // If this happens we need to remove the reference to the currentView since once a view\r\n    // has been destroyed we can not reuse it.\r\n    view.on('destroy', this._empty, this);\r\n  },\r\n\r\n  _proxyChildViewEvents(view) {\r\n    const parentView = this._parentView;\r\n\r\n    if (!parentView) { return; }\r\n\r\n    parentView._proxyChildViewEvents(view);\r\n  },\r\n\r\n  _attachView(view, options = {}) {\r\n    const shouldTriggerAttach = !view._isAttached && isNodeAttached(this.el);\r\n    const shouldReplaceEl = typeof options.replaceElement === 'undefined' ? !!_.result(this, 'replaceElement') : !!options.replaceElement;\r\n\r\n    if (shouldTriggerAttach) {\r\n      triggerMethodOn(view, 'before:attach', view);\r\n    }\r\n\r\n    if (shouldReplaceEl) {\r\n      this._replaceEl(view);\r\n    } else {\r\n      this.attachHtml(view);\r\n    }\r\n\r\n    if (shouldTriggerAttach) {\r\n      view._isAttached = true;\r\n      triggerMethodOn(view, 'attach', view);\r\n    }\r\n  },\r\n\r\n  _ensureElement(options = {}) {\r\n    if (!_.isObject(this.el)) {\r\n      this.$el = this.getEl(this.el);\r\n      this.el = this.$el[0];\r\n    }\r\n\r\n    if (!this.$el || this.$el.length === 0) {\r\n      const allowMissingEl = typeof options.allowMissingEl === 'undefined' ? !!_.result(this, 'allowMissingEl') : !!options.allowMissingEl;\r\n\r\n      if (allowMissingEl) {\r\n        return false;\r\n      } else {\r\n        throw new MarionetteError(`An \"el\" must exist in DOM for this region ${this.cid}`);\r\n      }\r\n    }\r\n    return true;\r\n  },\r\n\r\n  _getView(view) {\r\n    if (!view) {\r\n      throw new MarionetteError({\r\n        name: 'ViewNotValid',\r\n        message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'\r\n      });\r\n    }\r\n\r\n    if (view._isDestroyed) {\r\n      throw new MarionetteError({\r\n        name: 'ViewDestroyedError',\r\n        message: `View (cid: \"${view.cid}\") has already been destroyed and cannot be used.`\r\n      });\r\n    }\r\n\r\n    if (view instanceof Backbone.View) {\r\n      return view;\r\n    }\r\n\r\n    const viewOptions = this._getViewOptions(view);\r\n\r\n    return new View(viewOptions);\r\n  },\r\n\r\n  // This allows for a template or a static string to be\r\n  // used as a template\r\n  _getViewOptions(viewOptions) {\r\n    if (_.isFunction(viewOptions)) {\r\n      return { template: viewOptions };\r\n    }\r\n\r\n    if (_.isObject(viewOptions)) {\r\n      return viewOptions;\r\n    }\r\n\r\n    const template = function() { return viewOptions; };\r\n\r\n    return { template };\r\n  },\r\n\r\n  // Override this method to change how the region finds the DOM element that it manages. Return\r\n  // a jQuery selector object scoped to a provided parent el or the document if none exists.\r\n  getEl(el) {\r\n    return this.findEls(el, _.result(this, 'parentEl'));\r\n  },\r\n\r\n  _replaceEl(view) {\r\n    // always restore the el to ensure the regions el is present before replacing\r\n    this._restoreEl();\r\n\r\n    view.on('before:destroy', this._restoreEl, this);\r\n\r\n    this.replaceEl(view.el, this.el);\r\n\r\n    this._isReplaced = true;\r\n  },\r\n\r\n  // Restore the region's element in the DOM.\r\n  _restoreEl() {\r\n    // There is nothing to replace\r\n    if (!this._isReplaced) {\r\n      return;\r\n    }\r\n\r\n    const view = this.currentView;\r\n\r\n    if (!view) {\r\n      return;\r\n    }\r\n\r\n    this._detachView(view);\r\n\r\n    this._isReplaced = false;\r\n  },\r\n\r\n  // Check to see if the region's el was replaced.\r\n  isReplaced() {\r\n    return !!this._isReplaced;\r\n  },\r\n\r\n  // Check to see if a view is being swapped by another\r\n  isSwappingView() {\r\n    return !!this._isSwappingView;\r\n  },\r\n\r\n  // Override this method to change how the new view is appended to the `$el` that the\r\n  // region is managing\r\n  attachHtml(view) {\r\n    this.appendChildren(this.el, view.el);\r\n  },\r\n\r\n  // Destroy the current view, if there is one. If there is no current view, it does\r\n  // nothing and returns immediately.\r\n  empty(options = { allowMissingEl: true }) {\r\n    const view = this.currentView;\r\n\r\n    // If there is no view in the region we should only detach current html\r\n    if (!view) {\r\n      if (this._ensureElement(options)) {\r\n        this.detachHtml();\r\n      }\r\n      return this;\r\n    }\r\n\r\n    const shouldDestroy = !options.preventDestroy;\r\n\r\n    if (!shouldDestroy) {\r\n      deprecate('The preventDestroy option is deprecated. Use Region#detachView');\r\n    }\r\n\r\n    this._empty(view, shouldDestroy);\r\n    return this;\r\n  },\r\n\r\n  _empty(view, shouldDestroy) {\r\n    view.off('destroy', this._empty, this);\r\n    this.triggerMethod('before:empty', this, view);\r\n\r\n    this._restoreEl();\r\n\r\n    delete this.currentView;\r\n\r\n    if (!view._isDestroyed) {\r\n      if (shouldDestroy) {\r\n        this.removeView(view);\r\n      } else {\r\n        this._detachView(view);\r\n      }\r\n      this._stopChildViewEvents(view);\r\n    }\r\n\r\n    this.triggerMethod('empty', this, view);\r\n  },\r\n\r\n  _stopChildViewEvents(view) {\r\n    const parentView = this._parentView;\r\n\r\n    if (!parentView) { return; }\r\n\r\n    this._parentView.stopListening(view);\r\n  },\r\n\r\n  destroyView(view) {\r\n    if (view._isDestroyed) {\r\n      return view;\r\n    }\r\n\r\n    destroyView(view);\r\n    return view;\r\n  },\r\n\r\n  removeView(view) {\r\n    this.destroyView(view);\r\n  },\r\n\r\n  // Empties the Region without destroying the view\r\n  // Returns the detached view\r\n  detachView() {\r\n    const view = this.currentView;\r\n\r\n    if (!view) {\r\n      return;\r\n    }\r\n\r\n    this._empty(view);\r\n\r\n    return view;\r\n  },\r\n\r\n  _detachView(view) {\r\n    const shouldTriggerDetach = !!view._isAttached;\r\n    const shouldRestoreEl = this._isReplaced;\r\n    if (shouldTriggerDetach) {\r\n      triggerMethodOn(view, 'before:detach', view);\r\n    }\r\n\r\n    if (shouldRestoreEl) {\r\n      this.replaceEl(this.el, view.el);\r\n    } else {\r\n      this.detachHtml();\r\n    }\r\n\r\n    if (shouldTriggerDetach) {\r\n      view._isAttached = false;\r\n      triggerMethodOn(view, 'detach', view);\r\n    }\r\n  },\r\n\r\n  // Override this method to change how the region detaches current content\r\n  detachHtml() {\r\n    this.detachContents(this.el);\r\n  },\r\n\r\n  // Checks whether a view is currently present within the region. Returns `true` if there is\r\n  // and `false` if no view is present.\r\n  hasView() {\r\n    return !!this.currentView;\r\n  },\r\n\r\n  // Reset the region by destroying any existing view and clearing out the cached `$el`.\r\n  // The next time a view is shown via this region, the region will re-query the DOM for\r\n  // the region's `el`.\r\n  reset(options) {\r\n    this.empty(options);\r\n\r\n    if (this.$el) {\r\n      this.el = this._initEl;\r\n    }\r\n\r\n    delete this.$el;\r\n    return this;\r\n  },\r\n\r\n  destroy(options) {\r\n    if (this._isDestroyed) { return this; }\r\n\r\n    this.reset(options);\r\n\r\n    if (this._name) {\r\n      this._parentView._removeReferences(this._name);\r\n    }\r\n    delete this._parentView;\r\n    delete this._name;\r\n\r\n    return MarionetteObject.prototype.destroy.apply(this, arguments);\r\n  }\r\n});\r\n\r\n_.extend(Region.prototype, DomMixin);\r\n\r\nexport default Region;\r\n","import _ from 'underscore';\r\nimport deprecate from '../utils/deprecate';\r\nimport MarionetteError from '../error';\r\nimport Region from '../region';\r\n\r\n// return the region instance from the definition\r\nexport default function(definition, defaults) {\r\n  if (definition instanceof Region) {\r\n    return definition;\r\n  }\r\n\r\n  return buildRegionFromDefinition(definition, defaults);\r\n}\r\n\r\nfunction buildRegionFromDefinition(definition, defaults) {\r\n  const opts = _.extend({}, defaults);\r\n\r\n  if (_.isString(definition)) {\r\n    _.extend(opts, { el: definition });\r\n\r\n    return buildRegionFromObject(opts);\r\n  }\r\n\r\n  if (_.isFunction(definition)) {\r\n    _.extend(opts, { regionClass: definition });\r\n\r\n    return buildRegionFromObject(opts);\r\n  }\r\n\r\n  if (_.isObject(definition)) {\r\n    if (definition.selector) {\r\n      deprecate('The selector option on a Region definition object is deprecated. Use el to pass a selector string');\r\n    }\r\n\r\n    _.extend(opts, { el: definition.selector }, definition);\r\n\r\n    return buildRegionFromObject(opts);\r\n  }\r\n\r\n  throw new MarionetteError({\r\n    message: 'Improper region configuration type.',\r\n    url: 'marionette.region.html#region-configuration-types'\r\n  });\r\n}\r\n\r\nfunction buildRegionFromObject(definition) {\r\n  const RegionClass = definition.regionClass\r\n\r\n  const options = _.omit(definition, 'regionClass');\r\n\r\n  return new RegionClass(options);\r\n}\r\n","import _ from 'underscore';\r\nimport _invoke from '../utils/invoke';\r\nimport buildRegion from '../common/build-region';\r\nimport Region from '../region';\r\n\r\n// MixinOptions\r\n// - regions\r\n// - regionClass\r\n\r\nexport default {\r\n  regionClass: Region,\r\n\r\n  // Internal method to initialize the regions that have been defined in a\r\n  // `regions` attribute on this View.\r\n  _initRegions() {\r\n\r\n    // init regions hash\r\n    this.regions = this.regions || {};\r\n    this._regions = {};\r\n\r\n    this.addRegions(_.result(this, 'regions'));\r\n  },\r\n\r\n  // Internal method to re-initialize all of the regions by updating\r\n  // the `el` that they point to\r\n  _reInitRegions() {\r\n    _invoke(this._regions, 'reset');\r\n  },\r\n\r\n  // Add a single region, by name, to the View\r\n  addRegion(name, definition) {\r\n    const regions = {};\r\n    regions[name] = definition;\r\n    return this.addRegions(regions)[name];\r\n  },\r\n\r\n  // Add multiple regions as a {name: definition, name2: def2} object literal\r\n  addRegions(regions) {\r\n    // If there's nothing to add, stop here.\r\n    if (_.isEmpty(regions)) {\r\n      return;\r\n    }\r\n\r\n    // Normalize region selectors hash to allow\r\n    // a user to use the @ui. syntax.\r\n    regions = this.normalizeUIValues(regions, ['selector', 'el']);\r\n\r\n    // Add the regions definitions to the regions property\r\n    this.regions = _.extend({}, this.regions, regions);\r\n\r\n    return this._addRegions(regions);\r\n  },\r\n\r\n  // internal method to build and add regions\r\n  _addRegions(regionDefinitions) {\r\n    const defaults = {\r\n      regionClass: this.regionClass,\r\n      parentEl: _.partial(_.result, this, 'el')\r\n    };\r\n\r\n    return _.reduce(regionDefinitions, (regions, definition, name) => {\r\n      regions[name] = buildRegion(definition, defaults);\r\n      this._addRegion(regions[name], name);\r\n      return regions;\r\n    }, {});\r\n  },\r\n\r\n  _addRegion(region, name) {\r\n    this.triggerMethod('before:add:region', this, name, region);\r\n\r\n    region._parentView = this;\r\n    region._name = name;\r\n\r\n    this._regions[name] = region;\r\n\r\n    this.triggerMethod('add:region', this, name, region);\r\n  },\r\n\r\n  // Remove a single region from the View, by name\r\n  removeRegion(name) {\r\n    const region = this._regions[name];\r\n\r\n    this._removeRegion(region, name);\r\n\r\n    return region;\r\n  },\r\n\r\n  // Remove all regions from the View\r\n  removeRegions() {\r\n    const regions = this._getRegions();\r\n\r\n    _.each(this._regions, _.bind(this._removeRegion, this));\r\n\r\n    return regions;\r\n  },\r\n\r\n  _removeRegion(region, name) {\r\n    this.triggerMethod('before:remove:region', this, name, region);\r\n\r\n    region.destroy();\r\n\r\n    this.triggerMethod('remove:region', this, name, region);\r\n  },\r\n\r\n  // Called in a region's destroy\r\n  _removeReferences(name) {\r\n    delete this.regions[name];\r\n    delete this._regions[name];\r\n  },\r\n\r\n  // Empty all regions in the region manager, but\r\n  // leave them attached\r\n  emptyRegions() {\r\n    const regions = this.getRegions();\r\n    _invoke(regions, 'empty');\r\n    return regions;\r\n  },\r\n\r\n  // Checks to see if view contains region\r\n  // Accepts the region name\r\n  // hasRegion('main')\r\n  hasRegion(name) {\r\n    return !!this.getRegion(name);\r\n  },\r\n\r\n  // Provides access to regions\r\n  // Accepts the region name\r\n  // getRegion('main')\r\n  getRegion(name) {\r\n    if (!this._isRendered) {\r\n      this.render();\r\n    }\r\n    return this._regions[name];\r\n  },\r\n\r\n  // Get all regions\r\n  _getRegions() {\r\n    return _.clone(this._regions);\r\n  },\r\n\r\n  getRegions() {\r\n    if (!this._isRendered) {\r\n      this.render();\r\n    }\r\n    return this._getRegions();\r\n  },\r\n\r\n  showChildView(name, view, ...args) {\r\n    const region = this.getRegion(name);\r\n    return region.show(view, ...args);\r\n  },\r\n\r\n  detachChildView(name) {\r\n    return this.getRegion(name).detachView();\r\n  },\r\n\r\n  getChildView(name) {\r\n    return this.getRegion(name).currentView;\r\n  }\r\n\r\n};\r\n","// Renderer\r\n// --------\r\n\r\nimport _ from 'underscore';\r\nimport MarionetteError from '../error';\r\nimport TemplateCache from '../template-cache';\r\n\r\n// Render a template with data by passing in the template\r\n// selector and the data to render.\r\nconst Renderer = {\r\n\r\n  // Render a template with data. The `template` parameter is\r\n  // passed to the `TemplateCache` object to retrieve the\r\n  // template function. Override this method to provide your own\r\n  // custom rendering and template handling for all of Marionette.\r\n  render(template, data) {\r\n    if (!template) {\r\n      throw new MarionetteError({\r\n        name: 'TemplateNotFoundError',\r\n        message: 'Cannot render the template since its false, null or undefined.'\r\n      });\r\n    }\r\n\r\n    const templateFunc = _.isFunction(template) ? template : TemplateCache.get(template);\r\n\r\n    return templateFunc(data);\r\n  }\r\n};\r\n\r\nexport default Renderer;\r\n","// View\r\n// ---------\r\n\r\nimport _ from 'underscore';\r\nimport Backbone from 'backbone';\r\nimport deprecate from './utils/deprecate';\r\nimport isNodeAttached from './common/is-node-attached';\r\nimport monitorViewEvents from './common/monitor-view-events';\r\nimport ViewMixin from './mixins/view';\r\nimport RegionsMixin from './mixins/regions';\r\nimport Renderer from './config/renderer';\r\n\r\nconst ClassOptions = [\r\n  'behaviors',\r\n  'childViewEventPrefix',\r\n  'childViewEvents',\r\n  'childViewTriggers',\r\n  'collectionEvents',\r\n  'events',\r\n  'modelEvents',\r\n  'regionClass',\r\n  'regions',\r\n  'template',\r\n  'templateContext',\r\n  'triggers',\r\n  'ui'\r\n];\r\n\r\n// The standard view. Includes view events, automatic rendering\r\n// of Underscore templates, nested views, and more.\r\nconst View = Backbone.View.extend({\r\n\r\n  constructor(options) {\r\n    this.render = _.bind(this.render, this);\r\n\r\n    this._setOptions(options);\r\n\r\n    this.mergeOptions(options, ClassOptions);\r\n\r\n    monitorViewEvents(this);\r\n\r\n    this._initBehaviors();\r\n    this._initRegions();\r\n\r\n    const args = Array.prototype.slice.call(arguments);\r\n    args[0] = this.options;\r\n    Backbone.View.prototype.constructor.apply(this, args);\r\n\r\n    this.delegateEntityEvents();\r\n\r\n    this._triggerEventOnBehaviors('initialize', this);\r\n  },\r\n\r\n  // Serialize the view's model *or* collection, if\r\n  // it exists, for the template\r\n  serializeData() {\r\n    if (!this.model && !this.collection) {\r\n      return {};\r\n    }\r\n\r\n    // If we have a model, we serialize that\r\n    if (this.model) {\r\n      return this.serializeModel();\r\n    }\r\n\r\n    // Otherwise, we serialize the collection,\r\n    // making it available under the `items` property\r\n    return {\r\n      items: this.serializeCollection()\r\n    };\r\n  },\r\n\r\n  // Prepares the special `model` property of a view\r\n  // for being displayed in the template. By default\r\n  // we simply clone the attributes. Override this if\r\n  // you need a custom transformation for your view's model\r\n  serializeModel() {\r\n    if (!this.model) { return {}; }\r\n    return _.clone(this.model.attributes);\r\n  },\r\n\r\n  // Serialize a collection by cloning each of\r\n  // its model's attributes\r\n  serializeCollection() {\r\n    if (!this.collection) { return {}; }\r\n    return this.collection.map(function(model) { return _.clone(model.attributes); });\r\n  },\r\n\r\n  // Overriding Backbone.View's `setElement` to handle\r\n  // if an el was previously defined. If so, the view might be\r\n  // rendered or attached on setElement.\r\n  setElement() {\r\n    const hasEl = !!this.el;\r\n\r\n    Backbone.View.prototype.setElement.apply(this, arguments);\r\n\r\n    if (hasEl) {\r\n      this._isRendered = !!this.$el.length;\r\n      this._isAttached = isNodeAttached(this.el);\r\n    }\r\n\r\n    if (this._isRendered) {\r\n      this.bindUIElements();\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  // Render the view, defaulting to underscore.js templates.\r\n  // You can override this in your view definition to provide\r\n  // a very specific rendering for your view. In general, though,\r\n  // you should override the `Marionette.Renderer` object to\r\n  // change how Marionette renders views.\r\n  // Subsequent renders after the first will re-render all nested\r\n  // views.\r\n  render() {\r\n    if (this._isDestroyed) { return this; }\r\n\r\n    this.triggerMethod('before:render', this);\r\n\r\n    // If this is not the first render call, then we need to\r\n    // re-initialize the `el` for each region\r\n    if (this._isRendered) {\r\n      this._reInitRegions();\r\n    }\r\n\r\n    this._renderTemplate();\r\n    this.bindUIElements();\r\n\r\n    this._isRendered = true;\r\n    this.triggerMethod('render', this);\r\n\r\n    return this;\r\n  },\r\n\r\n  // Internal method to render the template with the serialized data\r\n  // and template context via the `Marionette.Renderer` object.\r\n  _renderTemplate() {\r\n    const template = this.getTemplate();\r\n\r\n    // Allow template-less views\r\n    if (template === false) {\r\n      deprecate('template:false is deprecated.  Use _.noop.');\r\n      return;\r\n    }\r\n\r\n    // Add in entity data and template context\r\n    const data = this.mixinTemplateContext(this.serializeData());\r\n\r\n    // Render and add to el\r\n    const html = this._renderHtml(template, data);\r\n    this.attachElContent(html);\r\n  },\r\n\r\n  // Renders the data into the template\r\n  _renderHtml(template, data) {\r\n    return Renderer.render(template, data, this);\r\n  },\r\n\r\n  // Get the template for this view\r\n  // instance. You can set a `template` attribute in the view\r\n  // definition or pass a `template: \"whatever\"` parameter in\r\n  // to the constructor options.\r\n  getTemplate() {\r\n    return this.template;\r\n  },\r\n\r\n  // Mix in template context methods. Looks for a\r\n  // `templateContext` attribute, which can either be an\r\n  // object literal, or a function that returns an object\r\n  // literal. All methods and attributes from this object\r\n  // are copies to the object passed in.\r\n  mixinTemplateContext(target = {}) {\r\n    const templateContext = _.result(this, 'templateContext');\r\n    return _.extend(target, templateContext);\r\n  },\r\n\r\n  // Attaches the content of a given view.\r\n  // This method can be overridden to optimize rendering,\r\n  // or to render in a non standard way.\r\n  //\r\n  // For example, using `innerHTML` instead of `$el.html`\r\n  //\r\n  // ```js\r\n  // attachElContent(html) {\r\n  //   this.el.innerHTML = html;\r\n  //   return this;\r\n  // }\r\n  // ```\r\n  attachElContent(html) {\r\n    this.setInnerContent(this.el, html);\r\n\r\n    return this;\r\n  },\r\n\r\n  // called by ViewMixin destroy\r\n  _removeChildren() {\r\n    this.removeRegions();\r\n  },\r\n\r\n  _getImmediateChildren() {\r\n    return _.chain(this._getRegions())\r\n      .map('currentView')\r\n      .compact()\r\n      .value();\r\n  }\r\n}, {\r\n  // Sets the renderer for the Marionette.View class\r\n  setRenderer(renderer) {\r\n    this.prototype._renderHtml = renderer;\r\n  }\r\n});\r\n\r\n_.extend(View.prototype, ViewMixin, RegionsMixin);\r\n\r\nexport default View;\r\n","// Mix in methods from Underscore, for iteration, and other\r\n// collection related features.\r\n// Borrowing this code from Backbone.Collection:\r\n// https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962\r\n\r\nimport _ from 'underscore';\r\n\r\nconst methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter',\r\n                'select', 'reject', 'every', 'all', 'some', 'any', 'include',\r\n                'contains', 'invoke', 'toArray', 'first', 'initial', 'rest',\r\n                'last', 'without', 'isEmpty', 'pluck', 'reduce', 'partition'];\r\n\r\nconst emulateCollection = function(object, listProperty) {\r\n  _.each(methods, function(method) {\r\n    object[method] = function() {\r\n      const list = _.result(this, listProperty);\r\n      const args = Array.prototype.slice.call(arguments);\r\n      return _[method].apply(_, [list].concat(args));\r\n    };\r\n  });\r\n};\r\n\r\nexport default emulateCollection;\r\n","import _ from 'underscore';\r\nimport emulateCollection from './utils/emulate-collection';\r\n\r\n// Provide a container to store, retrieve and\r\n// shut down child views.\r\nconst Container = function(views) {\r\n  this._views = {};\r\n  this._indexByModel = {};\r\n  this._indexByCustom = {};\r\n  this._updateLength();\r\n\r\n  _.each(views, _.bind(this.add, this));\r\n};\r\n\r\nemulateCollection(Container.prototype, '_getViews');\r\n\r\n// Container Methods\r\n// -----------------\r\n\r\n_.extend(Container.prototype, {\r\n\r\n  _getViews() {\r\n    return _.values(this._views);\r\n  },\r\n\r\n  // Add a view to this container. Stores the view\r\n  // by `cid` and makes it searchable by the model\r\n  // cid (and model itself). Optionally specify\r\n  // a custom key to store an retrieve the view.\r\n  add(view, customIndex) {\r\n    return this._add(view, customIndex)._updateLength();\r\n  },\r\n\r\n  // To be used when avoiding call _updateLength\r\n  // When you are done adding all your new views\r\n  // call _updateLength\r\n  _add(view, customIndex) {\r\n    const viewCid = view.cid;\r\n\r\n    // store the view\r\n    this._views[viewCid] = view;\r\n\r\n    // index it by model\r\n    if (view.model) {\r\n      this._indexByModel[view.model.cid] = viewCid;\r\n    }\r\n\r\n    // index by custom\r\n    if (customIndex) {\r\n      this._indexByCustom[customIndex] = viewCid;\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  // Find a view by the model that was attached to\r\n  // it. Uses the model's `cid` to find it.\r\n  findByModel(model) {\r\n    return this.findByModelCid(model.cid);\r\n  },\r\n\r\n  // Find a view by the `cid` of the model that was attached to\r\n  // it. Uses the model's `cid` to find the view `cid` and\r\n  // retrieve the view using it.\r\n  findByModelCid(modelCid) {\r\n    const viewCid = this._indexByModel[modelCid];\r\n    return this.findByCid(viewCid);\r\n  },\r\n\r\n  // Find a view by a custom indexer.\r\n  findByCustom(index) {\r\n    const viewCid = this._indexByCustom[index];\r\n    return this.findByCid(viewCid);\r\n  },\r\n\r\n  // Find by index. This is not guaranteed to be a\r\n  // stable index.\r\n  findByIndex(index) {\r\n    return _.values(this._views)[index];\r\n  },\r\n\r\n  // retrieve a view by its `cid` directly\r\n  findByCid(cid) {\r\n    return this._views[cid];\r\n  },\r\n\r\n  // Remove a view\r\n  remove(view) {\r\n    return this._remove(view)._updateLength();\r\n  },\r\n\r\n  // To be used when avoiding call _updateLength\r\n  // When you are done adding all your new views\r\n  // call _updateLength\r\n  _remove(view) {\r\n    const viewCid = view.cid;\r\n\r\n    // delete model index\r\n    if (view.model) {\r\n      delete this._indexByModel[view.model.cid];\r\n    }\r\n\r\n    // delete custom index\r\n    _.some(this._indexByCustom, _.bind(function(cid, key) {\r\n      if (cid === viewCid) {\r\n        delete this._indexByCustom[key];\r\n        return true;\r\n      }\r\n    }, this));\r\n\r\n    // remove the view from the container\r\n    delete this._views[viewCid];\r\n\r\n    return this;\r\n  },\r\n\r\n  // Update the `.length` attribute on this container\r\n  _updateLength() {\r\n    this.length = _.size(this._views);\r\n\r\n    return this;\r\n  }\r\n});\r\n\r\nexport default Container;\r\n","// Collection View\r\n// ---------------\r\n\r\nimport _ from 'underscore';\r\nimport Backbone from 'backbone';\r\nimport { renderView, destroyView } from './common/view';\r\nimport isNodeAttached from './common/is-node-attached';\r\nimport monitorViewEvents from './common/monitor-view-events';\r\nimport { triggerMethodOn } from './common/trigger-method';\r\nimport ChildViewContainer from './child-view-container';\r\nimport MarionetteError from './error';\r\nimport ViewMixin from './mixins/view';\r\n\r\nconst ClassOptions = [\r\n  'behaviors',\r\n  'childView',\r\n  'childViewEventPrefix',\r\n  'childViewEvents',\r\n  'childViewOptions',\r\n  'childViewTriggers',\r\n  'collectionEvents',\r\n  'events',\r\n  'filter',\r\n  'emptyView',\r\n  'emptyViewOptions',\r\n  'modelEvents',\r\n  'reorderOnSort',\r\n  'sort',\r\n  'triggers',\r\n  'ui',\r\n  'viewComparator'\r\n];\r\n\r\n// A view that iterates over a Backbone.Collection\r\n// and renders an individual child view for each model.\r\nconst CollectionView = Backbone.View.extend({\r\n\r\n  // flag for maintaining the sorted order of the collection\r\n  sort: true,\r\n\r\n  // constructor\r\n  // option to pass `{sort: false}` to prevent the `CollectionView` from\r\n  // maintaining the sorted order of the collection.\r\n  // This will fallback onto appending childView's to the end.\r\n  //\r\n  // option to pass `{viewComparator: compFunction()}` to allow the `CollectionView`\r\n  // to use a custom sort order for the collection.\r\n  constructor(options) {\r\n    this.render = _.bind(this.render, this);\r\n\r\n    this._setOptions(options);\r\n\r\n    this.mergeOptions(options, ClassOptions);\r\n\r\n    monitorViewEvents(this);\r\n\r\n    this._initBehaviors();\r\n    this.once('render', this._initialEvents);\r\n    this._initChildViewStorage();\r\n    this._bufferedChildren = [];\r\n\r\n    const args = Array.prototype.slice.call(arguments);\r\n    args[0] = this.options;\r\n    Backbone.View.prototype.constructor.apply(this, args);\r\n\r\n    this.delegateEntityEvents();\r\n\r\n    this._triggerEventOnBehaviors('initialize', this);\r\n  },\r\n\r\n  // Instead of inserting elements one by one into the page, it's much more performant to insert\r\n  // elements into a document fragment and then insert that document fragment into the page\r\n  _startBuffering() {\r\n    this._isBuffering = true;\r\n  },\r\n\r\n  _endBuffering() {\r\n    const shouldTriggerAttach = !!this._isAttached;\r\n    const triggerOnChildren = shouldTriggerAttach ? this._getImmediateChildren() : [];\r\n\r\n    this._isBuffering = false;\r\n\r\n    _.each(triggerOnChildren, child => {\r\n      triggerMethodOn(child, 'before:attach', child);\r\n    });\r\n\r\n    this.attachBuffer(this, this._createBuffer());\r\n\r\n    _.each(triggerOnChildren, child => {\r\n      child._isAttached = true;\r\n      triggerMethodOn(child, 'attach', child);\r\n    });\r\n\r\n    this._bufferedChildren = [];\r\n  },\r\n\r\n  _getImmediateChildren() {\r\n    return _.values(this.children._views);\r\n  },\r\n\r\n  // Configured the initial events that the collection view binds to.\r\n  _initialEvents() {\r\n    if (this.collection) {\r\n      this.listenTo(this.collection, 'add', this._onCollectionAdd);\r\n      this.listenTo(this.collection, 'update', this._onCollectionUpdate);\r\n      this.listenTo(this.collection, 'reset', this.render);\r\n\r\n      if (this.sort) {\r\n        this.listenTo(this.collection, 'sort', this._sortViews);\r\n      }\r\n    }\r\n  },\r\n\r\n  // Handle a child added to the collection\r\n  _onCollectionAdd(child, collection, opts) {\r\n    // `index` is present when adding with `at` since BB 1.2; indexOf fallback for < 1.2\r\n    let index = opts.at !== undefined && (opts.index || collection.indexOf(child));\r\n\r\n    // When filtered or when there is no initial index, calculate index.\r\n    if (this.filter || index === false) {\r\n      index = _.indexOf(this._filteredSortedModels(index), child);\r\n    }\r\n\r\n    if (this._shouldAddChild(child, index)) {\r\n      this._destroyEmptyView();\r\n      this._addChild(child, index)\r\n    }\r\n  },\r\n\r\n  // Handle collection update model removals\r\n  _onCollectionUpdate(collection, options) {\r\n    const changes = options.changes;\r\n    this._removeChildModels(changes.removed);\r\n  },\r\n\r\n  // Remove the child views and destroy them.\r\n  // This function also updates the indices of later views\r\n  // in the collection in order to keep the children in sync with the collection.\r\n  // \"models\" is an array of models and the corresponding views\r\n  // will be removed and destroyed from the CollectionView\r\n  _removeChildModels(models) {\r\n    // Used to determine where to update the remaining\r\n    // sibling view indices after these views are removed.\r\n    const removedViews = this._getRemovedViews(models);\r\n\r\n    if (!removedViews.length) {\r\n      return;\r\n    }\r\n\r\n    this.children._updateLength();\r\n\r\n    // decrement the index of views after this one\r\n    this._updateIndices(removedViews, false);\r\n\r\n    if (this.isEmpty()) {\r\n      this._showEmptyView();\r\n    }\r\n  },\r\n\r\n  // Returns the views that will be used for re-indexing\r\n  // through CollectionView#_updateIndices.\r\n  _getRemovedViews(models) {\r\n\r\n    // Returning a view means something was removed.\r\n    return _.reduce(models, (removingViews, model) => {\r\n      const view = model && this.children.findByModel(model);\r\n\r\n      if (!view || view._isDestroyed) {\r\n        return removingViews;\r\n      }\r\n\r\n      this._removeChildView(view);\r\n\r\n      removingViews.push(view);\r\n\r\n      return removingViews;\r\n    }, []);\r\n  },\r\n\r\n  _removeChildView(view) {\r\n    this.triggerMethod('before:remove:child', this, view);\r\n\r\n    this.children._remove(view);\r\n    destroyView(view);\r\n\r\n    this.stopListening(view);\r\n    this.triggerMethod('remove:child', this, view);\r\n  },\r\n\r\n  // Overriding Backbone.View's `setElement` to handle\r\n  // if an el was previously defined. If so, the view might be\r\n  // attached on setElement.\r\n  setElement() {\r\n    const hasEl = !!this.el;\r\n\r\n    Backbone.View.prototype.setElement.apply(this, arguments);\r\n\r\n    if (hasEl) {\r\n      this._isAttached = isNodeAttached(this.el);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  // Render children views. Override this method to provide your own implementation of a\r\n  // render function for the collection view.\r\n  render() {\r\n    if (this._isDestroyed) { return this; }\r\n    this.triggerMethod('before:render', this);\r\n    this._renderChildren();\r\n    this._isRendered = true;\r\n    this.triggerMethod('render', this);\r\n    return this;\r\n  },\r\n\r\n  // An efficient rendering used for filtering. Instead of modifying the whole DOM for the\r\n  // collection view, we are only adding or removing the related childrenViews.\r\n  setFilter(filter, {preventRender} = {}) {\r\n    const canBeRendered = this._isRendered && !this._isDestroyed;\r\n    const filterChanged = this.filter !== filter;\r\n    const shouldRender = canBeRendered && filterChanged && !preventRender;\r\n\r\n    if (shouldRender) {\r\n      const previousModels = this._filteredSortedModels();\r\n      this.filter = filter;\r\n      const models = this._filteredSortedModels();\r\n      this._applyModelDeltas(models, previousModels);\r\n    } else {\r\n      this.filter = filter;\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  // `removeFilter` is actually an alias for removing filters.\r\n  removeFilter(options) {\r\n    return this.setFilter(null, options);\r\n  },\r\n\r\n  // Calculate and apply difference by cid between `models` and `previousModels`.\r\n  _applyModelDeltas(models, previousModels) {\r\n    const currentIds = {};\r\n    _.each(models, (model, index) => {\r\n      const addedChildNotExists = !this.children.findByModel(model);\r\n      if (addedChildNotExists) {\r\n        this._onCollectionAdd(model, this.collection, {at: index});\r\n      }\r\n      currentIds[model.cid] = true;\r\n    });\r\n\r\n    const removeModels = _.filter(previousModels, (prevModel) => {\r\n      return !currentIds[prevModel.cid] && this.children.findByModel(prevModel);\r\n    });\r\n\r\n    this._removeChildModels(removeModels);\r\n  },\r\n\r\n  // Reorder DOM after sorting. When your element's rendering do not use their index,\r\n  // you can pass reorderOnSort: true to only reorder the DOM after a sort instead of\r\n  // rendering all the collectionView.\r\n  reorder() {\r\n    const children = this.children;\r\n    const models = this._filteredSortedModels();\r\n\r\n    if (!models.length && this._showingEmptyView) { return this; }\r\n\r\n    const anyModelsAdded = _.some(models, function(model) {\r\n      return !children.findByModel(model);\r\n    });\r\n\r\n    // If there are any new models added due to filtering we need to add child views,\r\n    // so render as normal.\r\n    if (anyModelsAdded) {\r\n      this.render();\r\n    } else {\r\n\r\n      const filteredOutModels = [];\r\n\r\n      // Get the DOM nodes in the same order as the models and\r\n      // find the model that were children before but aren't in this new order.\r\n      const elsToReorder = _.reduce(this.children._views, function(viewEls, view) {\r\n        const index = _.indexOf(models, view.model);\r\n\r\n        if (index === -1) {\r\n          filteredOutModels.push(view.model);\r\n          return viewEls;\r\n        }\r\n\r\n        view._index = index;\r\n\r\n        viewEls[index] = view.el;\r\n\r\n        return viewEls;\r\n      }, new Array(models.length));\r\n\r\n      this.triggerMethod('before:reorder', this);\r\n\r\n      // Since append moves elements that are already in the DOM, appending the elements\r\n      // will effectively reorder them.\r\n      this._appendReorderedChildren(elsToReorder);\r\n\r\n      // remove any views that have been filtered out\r\n      this._removeChildModels(filteredOutModels);\r\n\r\n      this.triggerMethod('reorder', this);\r\n    }\r\n    return this;\r\n  },\r\n\r\n  // Render view after sorting. Override this method to change how the view renders\r\n  // after a `sort` on the collection.\r\n  resortView() {\r\n    if (this.reorderOnSort) {\r\n      this.reorder();\r\n    } else {\r\n      this._renderChildren();\r\n    }\r\n    return this;\r\n  },\r\n\r\n  // Internal method. This checks for any changes in the order of the collection.\r\n  // If the index of any view doesn't match, it will render.\r\n  _sortViews() {\r\n    const models = this._filteredSortedModels();\r\n\r\n    // check for any changes in sort order of views\r\n    const orderChanged = _.find(models, (item, index) => {\r\n      const view = this.children.findByModel(item);\r\n      return !view || view._index !== index;\r\n    });\r\n\r\n    if (orderChanged) {\r\n      this.resortView();\r\n    }\r\n  },\r\n\r\n  // Internal reference to what index a `emptyView` is.\r\n  _emptyViewIndex: -1,\r\n\r\n  // Internal method. Separated so that CompositeView can append to the childViewContainer\r\n  // if necessary\r\n  _appendReorderedChildren(children) {\r\n    this.appendChildren(this.el, children);\r\n  },\r\n\r\n  // Internal method. Separated so that CompositeView can have more control over events\r\n  // being triggered, around the rendering process\r\n  _renderChildren() {\r\n    if (this._isRendered) {\r\n      this._destroyEmptyView();\r\n      this._destroyChildren();\r\n    }\r\n\r\n    const models = this._filteredSortedModels();\r\n    if (this.isEmpty({processedModels: models})) {\r\n      this._showEmptyView();\r\n    } else {\r\n      this.triggerMethod('before:render:children', this);\r\n      this._startBuffering();\r\n      this._showCollection(models);\r\n      this._endBuffering();\r\n      this.triggerMethod('render:children', this);\r\n    }\r\n  },\r\n\r\n  _createView(model, index) {\r\n    const ChildView = this._getChildView(model);\r\n    const childViewOptions = this._getChildViewOptions(model, index);\r\n    const view = this.buildChildView(model, ChildView, childViewOptions);\r\n    return view;\r\n  },\r\n\r\n  _setupChildView(view, index) {\r\n    monitorViewEvents(view);\r\n\r\n    // set up the child view event forwarding\r\n    this._proxyChildViewEvents(view);\r\n\r\n    if (this.sort) {\r\n      view._index = index;\r\n    }\r\n  },\r\n\r\n  // Internal method to loop through collection and show each child view.\r\n  _showCollection(models) {\r\n    _.each(models, _.bind(this._addChild, this));\r\n    this.children._updateLength();\r\n  },\r\n\r\n  // Allow the collection to be sorted by a custom view comparator\r\n  _filteredSortedModels(addedAt) {\r\n    if (!this.collection || !this.collection.length) { return []; }\r\n\r\n    const viewComparator = this.getViewComparator();\r\n    let models = this.collection.models;\r\n    addedAt = Math.min(Math.max(addedAt, 0), models.length - 1);\r\n\r\n    if (viewComparator) {\r\n      let addedModel;\r\n      // Preserve `at` location, even for a sorted view\r\n      if (addedAt) {\r\n        addedModel = models[addedAt];\r\n        models = models.slice(0, addedAt).concat(models.slice(addedAt + 1));\r\n      }\r\n      models = this._sortModelsBy(models, viewComparator);\r\n      if (addedModel) {\r\n        models.splice(addedAt, 0, addedModel);\r\n      }\r\n    }\r\n\r\n    // Filter after sorting in case the filter uses the index\r\n    models = this._filterModels(models);\r\n\r\n    return models;\r\n  },\r\n\r\n  getViewComparator() {\r\n    return this.viewComparator;\r\n  },\r\n\r\n  // Filter an array of models, if a filter exists\r\n  _filterModels(models) {\r\n    if (this.filter) {\r\n      models = _.filter(models, (model, index) => {\r\n        return this._shouldAddChild(model, index);\r\n      });\r\n    }\r\n    return models;\r\n  },\r\n\r\n  _sortModelsBy(models, comparator) {\r\n    if (typeof comparator === 'string') {\r\n      return _.sortBy(models, (model) => {\r\n        return model.get(comparator);\r\n      });\r\n    } else if (comparator.length === 1) {\r\n      return _.sortBy(models, _.bind(comparator, this));\r\n    } else {\r\n      return _.clone(models).sort(_.bind(comparator, this));\r\n    }\r\n  },\r\n\r\n  // Internal method to show an empty view in place of a collection of child views,\r\n  // when the collection is empty\r\n  _showEmptyView() {\r\n    const EmptyView = this._getEmptyView();\r\n\r\n    if (EmptyView && !this._showingEmptyView) {\r\n      this._showingEmptyView = true;\r\n\r\n      const model = new Backbone.Model();\r\n      let emptyViewOptions =\r\n        this.emptyViewOptions || this.childViewOptions;\r\n      if (_.isFunction(emptyViewOptions)) {\r\n        emptyViewOptions = emptyViewOptions.call(this, model, this._emptyViewIndex);\r\n      }\r\n\r\n      const view = this.buildChildView(model, EmptyView, emptyViewOptions);\r\n\r\n      this.triggerMethod('before:render:empty', this, view);\r\n      this.addChildView(view, 0);\r\n      this.triggerMethod('render:empty', this, view);\r\n    }\r\n  },\r\n\r\n  // Internal method to destroy an existing emptyView instance if one exists. Called when\r\n  // a collection view has been rendered empty, and then a child is added to the collection.\r\n  _destroyEmptyView() {\r\n    if (this._showingEmptyView) {\r\n      this.triggerMethod('before:remove:empty', this);\r\n\r\n      this._destroyChildren();\r\n      delete this._showingEmptyView;\r\n\r\n      this.triggerMethod('remove:empty', this);\r\n    }\r\n  },\r\n\r\n  // Retrieve the empty view class\r\n  _getEmptyView() {\r\n    const emptyView = this.emptyView;\r\n\r\n    if (!emptyView) { return; }\r\n\r\n    return this._getView(emptyView);\r\n  },\r\n\r\n  // Retrieve the `childView` class\r\n  // The `childView` property can be either a view class or a function that\r\n  // returns a view class. If it is a function, it will receive the model that\r\n  // will be passed to the view instance (created from the returned view class)\r\n  _getChildView(child) {\r\n    let childView = this.childView;\r\n\r\n    if (!childView) {\r\n      throw new MarionetteError({\r\n        name: 'NoChildViewError',\r\n        message: 'A \"childView\" must be specified'\r\n      });\r\n    }\r\n\r\n    childView = this._getView(childView, child);\r\n\r\n    if (!childView) {\r\n      throw new MarionetteError({\r\n        name: 'InvalidChildViewError',\r\n        message: '\"childView\" must be a view class or a function that returns a view class'\r\n      });\r\n    }\r\n\r\n    return childView;\r\n  },\r\n\r\n  // First check if the `view` is a view class (the common case)\r\n  // Then check if it's a function (which we assume that returns a view class)\r\n  _getView(view, child) {\r\n    if (view.prototype instanceof Backbone.View || view === Backbone.View) {\r\n      return view;\r\n    } else if (_.isFunction(view)) {\r\n      return view.call(this, child);\r\n    }\r\n  },\r\n\r\n  // Internal method for building and adding a child view\r\n  _addChild(child, index) {\r\n    const view = this._createView(child, index);\r\n    this.addChildView(view, index);\r\n\r\n    return view;\r\n  },\r\n\r\n  _getChildViewOptions(child, index) {\r\n    if (_.isFunction(this.childViewOptions)) {\r\n      return this.childViewOptions(child, index);\r\n    }\r\n\r\n    return this.childViewOptions;\r\n  },\r\n\r\n  // Render the child's view and add it to the HTML for the collection view at a given index.\r\n  // This will also update the indices of later views in the collection in order to keep the\r\n  // children in sync with the collection.\r\n  addChildView(view, index) {\r\n    this.triggerMethod('before:add:child', this, view);\r\n    this._setupChildView(view, index);\r\n\r\n    // Store the child view itself so we can properly remove and/or destroy it later\r\n    if (this._isBuffering) {\r\n      // Add to children, but don't update children's length.\r\n      this.children._add(view);\r\n    } else {\r\n      // increment indices of views after this one\r\n      this._updateIndices(view, true);\r\n      this.children.add(view);\r\n    }\r\n\r\n    renderView(view);\r\n\r\n    this._attachView(view, index);\r\n\r\n    this.triggerMethod('add:child', this, view);\r\n\r\n    return view;\r\n  },\r\n\r\n  // Internal method. This decrements or increments the indices of views after the added/removed\r\n  // view to keep in sync with the collection.\r\n  _updateIndices(views, increment) {\r\n    if (!this.sort) {\r\n      return;\r\n    }\r\n\r\n    if (!increment) {\r\n      _.each(_.sortBy(this.children._views, '_index'), (view, index) => {\r\n        view._index = index;\r\n      });\r\n\r\n      return;\r\n    }\r\n\r\n    const view = _.isArray(views) ? _.max(views, '_index') : views;\r\n\r\n    if (_.isObject(view)) {\r\n      // update the indexes of views after this one\r\n      _.each(this.children._views, (laterView) => {\r\n        if (laterView._index >= view._index) {\r\n          laterView._index += 1;\r\n        }\r\n      });\r\n    }\r\n  },\r\n\r\n  _attachView(view, index) {\r\n    // Only trigger attach if already attached and not buffering,\r\n    // otherwise _endBuffering() or Region#show() handles this.\r\n    const shouldTriggerAttach = !view._isAttached && !this._isBuffering && this._isAttached;\r\n\r\n    if (shouldTriggerAttach) {\r\n      triggerMethodOn(view, 'before:attach', view);\r\n    }\r\n\r\n    this.attachHtml(this, view, index);\r\n\r\n    if (shouldTriggerAttach) {\r\n      view._isAttached = true;\r\n      triggerMethodOn(view, 'attach', view);\r\n    }\r\n  },\r\n\r\n  // Build a `childView` for a model in the collection.\r\n  buildChildView(child, ChildViewClass, childViewOptions) {\r\n    const options = _.extend({model: child}, childViewOptions);\r\n    return new ChildViewClass(options);\r\n  },\r\n\r\n  // Remove the child view and destroy it. This function also updates the indices of later views\r\n  // in the collection in order to keep the children in sync with the collection.\r\n  removeChildView(view) {\r\n    if (!view || view._isDestroyed) {\r\n      return view;\r\n    }\r\n\r\n    this._removeChildView(view);\r\n    this.children._updateLength();\r\n    // decrement the index of views after this one\r\n    this._updateIndices(view, false);\r\n    return view;\r\n  },\r\n\r\n  // check if the collection is empty or optionally whether an array of pre-processed models is empty\r\n  isEmpty(options) {\r\n    let models;\r\n    if (_.result(options, 'processedModels')) {\r\n      models = options.processedModels;\r\n    } else {\r\n      models = this.collection ? this.collection.models : [];\r\n      models = this._filterModels(models);\r\n    }\r\n    return models.length === 0;\r\n  },\r\n\r\n  // You might need to override this if you've overridden attachHtml\r\n  attachBuffer(collectionView, buffer) {\r\n    this.appendChildren(collectionView.el, buffer);\r\n  },\r\n\r\n  // Create a fragment buffer from the currently buffered children\r\n  _createBuffer() {\r\n    const elBuffer = this.createBuffer();\r\n    _.each(this._bufferedChildren, (b) => {\r\n      this.appendChildren(elBuffer, b.el);\r\n    });\r\n    return elBuffer;\r\n  },\r\n\r\n  // Append the HTML to the collection's `el`. Override this method to do something other\r\n  // than `.append`.\r\n  attachHtml(collectionView, childView, index) {\r\n    if (collectionView._isBuffering) {\r\n      // buffering happens on reset events and initial renders\r\n      // in order to reduce the number of inserts into the\r\n      // document, which are expensive.\r\n      collectionView._bufferedChildren.splice(index, 0, childView);\r\n    } else {\r\n      // If we've already rendered the main collection, append\r\n      // the new child into the correct order if we need to. Otherwise\r\n      // append to the end.\r\n      if (!collectionView._insertBefore(childView, index)) {\r\n        collectionView._insertAfter(childView);\r\n      }\r\n    }\r\n  },\r\n\r\n  // Internal method. Check whether we need to insert the view into the correct position.\r\n  _insertBefore(childView, index) {\r\n    let currentView;\r\n    const findPosition = this.sort && (index < this.children.length - 1);\r\n    if (findPosition) {\r\n      // Find the view after this one\r\n      currentView = _.find(this.children._views, (view) => {\r\n        return view._index === index + 1;\r\n      });\r\n    }\r\n\r\n    if (currentView) {\r\n      this.beforeEl(currentView.el, childView.el);\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  },\r\n\r\n  // Internal method. Append a view to the end of the $el\r\n  _insertAfter(childView) {\r\n    this.appendChildren(this.el, childView.el);\r\n  },\r\n\r\n  // Internal method to set up the `children` object for storing all of the child views\r\n  _initChildViewStorage() {\r\n    this.children = new ChildViewContainer();\r\n  },\r\n\r\n  // called by ViewMixin destroy\r\n  _removeChildren() {\r\n    this._destroyChildren();\r\n  },\r\n\r\n  // Destroy the child views that this collection view is holding on to, if any\r\n  _destroyChildren(options) {\r\n    if (!this.children.length) {\r\n      return;\r\n    }\r\n\r\n    this.triggerMethod('before:destroy:children', this);\r\n    _.each(this.children._views, _.bind(this._removeChildView, this));\r\n    this.children._updateLength();\r\n    this.triggerMethod('destroy:children', this);\r\n  },\r\n\r\n  // Return true if the given child should be shown. Return false otherwise.\r\n  // The filter will be passed (child, index, collection), where\r\n  //  'child' is the given model\r\n  //  'index' is the index of that model in the collection\r\n  //  'collection' is the collection referenced by this CollectionView\r\n  _shouldAddChild(child, index) {\r\n    const filter = this.filter;\r\n    return !_.isFunction(filter) || filter.call(this, child, index, this.collection);\r\n  }\r\n});\r\n\r\n_.extend(CollectionView.prototype, ViewMixin);\r\n\r\nexport default CollectionView;\r\n","import _ from 'underscore';\r\nimport emulateCollection from './utils/emulate-collection';\r\n\r\n// Provide a container to store, retrieve and\r\n// shut down child views.\r\nconst Container = function() {\r\n  this._init();\r\n};\r\n\r\nemulateCollection(Container.prototype, '_views');\r\n\r\nfunction stringComparator(comparator, view) {\r\n  return view.model && view.model.get(comparator);\r\n}\r\n\r\n// Container Methods\r\n// -----------------\r\n\r\n_.extend(Container.prototype, {\r\n\r\n  // Initializes an empty container\r\n  _init() {\r\n    this._views = [];\r\n    this._viewsByCid = {};\r\n    this._indexByModel = {};\r\n    this._updateLength();\r\n  },\r\n\r\n  // Add a view to this container. Stores the view\r\n  // by `cid` and makes it searchable by the model\r\n  // cid (and model itself). Additionally it stores\r\n  // the view by index in the _views array\r\n  _add(view, index = this._views.length) {\r\n    const viewCid = view.cid;\r\n\r\n    // store the view\r\n    this._viewsByCid[viewCid] = view;\r\n\r\n    // index it by model\r\n    if (view.model) {\r\n      this._indexByModel[view.model.cid] = viewCid;\r\n    }\r\n\r\n    // add to end by default\r\n    this._views.splice(index, 0, view);\r\n\r\n    this._updateLength();\r\n  },\r\n\r\n  // Sort (mutate) and return the array of the child views.\r\n  _sort(comparator) {\r\n    if (typeof comparator === 'string') {\r\n      comparator = _.partial(stringComparator, comparator);\r\n      return this._sortBy(comparator);\r\n    }\r\n\r\n    if (comparator.length === 1) {\r\n      return this._sortBy(comparator);\r\n    }\r\n\r\n    return this._views.sort(comparator);\r\n  },\r\n\r\n  // Makes `_.sortBy` mutate the array to match `this._views.sort`\r\n  _sortBy(comparator) {\r\n    const sortedViews = _.sortBy(this._views, comparator);\r\n\r\n    this._set(sortedViews);\r\n\r\n    return sortedViews;\r\n  },\r\n\r\n  // Replace array contents without overwriting the reference.\r\n  _set(views) {\r\n    this._views.length = 0;\r\n\r\n    this._views.push.apply(this._views, views.slice(0));\r\n\r\n    this._updateLength();\r\n  },\r\n\r\n  // Find a view by the model that was attached to it.\r\n  // Uses the model's `cid` to find it.\r\n  findByModel(model) {\r\n    return this.findByModelCid(model.cid);\r\n  },\r\n\r\n  // Find a view by the `cid` of the model that was attached to it.\r\n  // Uses the model's `cid` to find the view `cid` and\r\n  // retrieve the view using it.\r\n  findByModelCid(modelCid) {\r\n    const viewCid = this._indexByModel[modelCid];\r\n    return this.findByCid(viewCid);\r\n  },\r\n\r\n  // Find a view by index.\r\n  findByIndex(index) {\r\n    return this._views[index];\r\n  },\r\n\r\n  // Find the index of a view instance\r\n  findIndexByView(view) {\r\n    return this._views.indexOf(view);\r\n  },\r\n\r\n  // Retrieve a view by its `cid` directly\r\n  findByCid(cid) {\r\n    return this._viewsByCid[cid];\r\n  },\r\n\r\n  // Remove a view and clean up index references.\r\n  _remove(view) {\r\n    if (!this._viewsByCid[view.cid]) {\r\n      return;\r\n    }\r\n\r\n    // delete model index\r\n    if (view.model) {\r\n      delete this._indexByModel[view.model.cid];\r\n    }\r\n\r\n    // remove the view from the container\r\n    delete this._viewsByCid[view.cid];\r\n\r\n    const index = this.findIndexByView(view);\r\n    this._views.splice(index, 1);\r\n\r\n    this._updateLength();\r\n  },\r\n\r\n  // Update the `.length` attribute on this container\r\n  _updateLength() {\r\n    this.length = this._views.length;\r\n  }\r\n});\r\n\r\nexport default Container;\r\n","// Next Collection View\r\n// ---------------\r\n\r\nimport _ from 'underscore';\r\nimport Backbone from 'backbone';\r\nimport { renderView, destroyView } from './common/view';\r\nimport isNodeAttached from './common/is-node-attached';\r\nimport monitorViewEvents from './common/monitor-view-events';\r\nimport { triggerMethodOn } from './common/trigger-method';\r\nimport ChildViewContainer from './next-child-view-container';\r\nimport MarionetteError from './error';\r\nimport Region from './region';\r\nimport ViewMixin from './mixins/view';\r\n\r\nconst ClassOptions = [\r\n  'behaviors',\r\n  'childView',\r\n  'childViewEventPrefix',\r\n  'childViewEvents',\r\n  'childViewOptions',\r\n  'childViewTriggers',\r\n  'collectionEvents',\r\n  'emptyView',\r\n  'emptyViewOptions',\r\n  'events',\r\n  'modelEvents',\r\n  'sortWithCollection',\r\n  'triggers',\r\n  'ui',\r\n  'viewComparator',\r\n  'viewFilter'\r\n];\r\n\r\n// A view that iterates over a Backbone.Collection\r\n// and renders an individual child view for each model.\r\nconst CollectionView = Backbone.View.extend({\r\n  // flag for maintaining the sorted order of the collection\r\n  sortWithCollection: true,\r\n\r\n  // constructor\r\n  constructor(options) {\r\n    this._setOptions(options);\r\n\r\n    this.mergeOptions(options, ClassOptions);\r\n\r\n    monitorViewEvents(this);\r\n\r\n    this.once('render', this._initialEvents);\r\n\r\n    // This children container isn't really used by a render, but it provides\r\n    // the ability to check `this.children.length` prior to rendering\r\n    // It also allows for cases where only addChildView is used\r\n    this._initChildViewStorage();\r\n    this._initBehaviors();\r\n\r\n    const args = Array.prototype.slice.call(arguments);\r\n    args[0] = this.options;\r\n    Backbone.View.prototype.constructor.apply(this, args);\r\n\r\n    this._initEmptyRegion();\r\n\r\n    this.delegateEntityEvents();\r\n\r\n    this._triggerEventOnBehaviors('initialize', this);\r\n  },\r\n\r\n  // Internal method to set up the `children` object for storing all of the child views\r\n  _initChildViewStorage() {\r\n    this.children = new ChildViewContainer();\r\n  },\r\n\r\n  // Create an region to show the emptyView\r\n  _initEmptyRegion() {\r\n    this.emptyRegion = new Region({ el: this.el })\r\n\r\n    this.emptyRegion._parentView = this;\r\n  },\r\n\r\n  // Configured the initial events that the collection view binds to.\r\n  _initialEvents() {\r\n    this.listenTo(this.collection, {\r\n      'sort': this._onCollectionSort,\r\n      'reset': this._onCollectionReset,\r\n      'update': this._onCollectionUpdate\r\n    });\r\n  },\r\n\r\n  // Internal method. This checks for any changes in the order of the collection.\r\n  // If the index of any view doesn't match, it will re-sort.\r\n  _onCollectionSort() {\r\n    if (!this.sortWithCollection) {\r\n      return;\r\n    }\r\n\r\n    // If the data is changing we will handle the sort later\r\n    if (this.collection.length !== this.children.length) {\r\n      return;\r\n    }\r\n\r\n    // Additional check if the data is changing\r\n    const hasAddedModel = this.collection.some(model => {\r\n      return !this.children.findByModel(model);\r\n    });\r\n\r\n    if (hasAddedModel) {\r\n      return;\r\n    }\r\n\r\n    // If the only thing happening here is sorting, sort.\r\n    this.sort();\r\n  },\r\n\r\n  _onCollectionReset() {\r\n    this.render();\r\n  },\r\n\r\n  // Handle collection update model additions and  removals\r\n  _onCollectionUpdate(collection, options) {\r\n    const changes = options.changes;\r\n\r\n    // Remove first since it'll be a shorter array lookup.\r\n    const removedViews = this._removeChildModels(changes.removed);\r\n\r\n    this._addChildModels(changes.added);\r\n\r\n    this._detachChildren(removedViews);\r\n\r\n    this._showChildren();\r\n\r\n    // Destroy removed child views after all of the render is complete\r\n    this._removeChildViews(removedViews);\r\n  },\r\n\r\n  _removeChildModels(models) {\r\n    return _.map(models, _.bind(this._removeChildModel, this));\r\n  },\r\n\r\n  _removeChildModel(model) {\r\n    const view = this.children.findByModel(model);\r\n\r\n    this._removeChild(view);\r\n\r\n    return view;\r\n  },\r\n\r\n  _removeChild(view) {\r\n    this.triggerMethod('before:remove:child', this, view);\r\n\r\n    this.children._remove(view);\r\n\r\n    this.triggerMethod('remove:child', this, view);\r\n  },\r\n\r\n  // Added views are returned for consistency with _removeChildModels\r\n  _addChildModels(models) {\r\n    return _.map(models, _.bind(this._addChildModel, this));\r\n  },\r\n\r\n  _addChildModel(model) {\r\n    const view = this._createChildView(model);\r\n\r\n    this._addChild(view);\r\n\r\n    return view;\r\n  },\r\n\r\n  _createChildView(model) {\r\n    const ChildView = this._getChildView(model);\r\n    const childViewOptions = this._getChildViewOptions(model);\r\n    const view = this.buildChildView(model, ChildView, childViewOptions);\r\n\r\n    return view;\r\n  },\r\n\r\n  _addChild(view, index) {\r\n    this.triggerMethod('before:add:child', this, view);\r\n\r\n    this._setupChildView(view);\r\n    this.children._add(view, index);\r\n\r\n    this.triggerMethod('add:child', this, view);\r\n  },\r\n\r\n  // Retrieve the `childView` class\r\n  // The `childView` property can be either a view class or a function that\r\n  // returns a view class. If it is a function, it will receive the model that\r\n  // will be passed to the view instance (created from the returned view class)\r\n  _getChildView(child) {\r\n    let childView = this.childView;\r\n\r\n    if (!childView) {\r\n      throw new MarionetteError({\r\n        name: 'NoChildViewError',\r\n        message: 'A \"childView\" must be specified'\r\n      });\r\n    }\r\n\r\n    childView = this._getView(childView, child);\r\n\r\n    if (!childView) {\r\n      throw new MarionetteError({\r\n        name: 'InvalidChildViewError',\r\n        message: '\"childView\" must be a view class or a function that returns a view class'\r\n      });\r\n    }\r\n\r\n    return childView;\r\n  },\r\n\r\n  // First check if the `view` is a view class (the common case)\r\n  // Then check if it's a function (which we assume that returns a view class)\r\n  _getView(view, child) {\r\n    if (view.prototype instanceof Backbone.View || view === Backbone.View) {\r\n      return view;\r\n    } else if (_.isFunction(view)) {\r\n      return view.call(this, child);\r\n    }\r\n  },\r\n\r\n  _getChildViewOptions(child) {\r\n    if (_.isFunction(this.childViewOptions)) {\r\n      return this.childViewOptions(child);\r\n    }\r\n\r\n    return this.childViewOptions;\r\n  },\r\n\r\n  // Build a `childView` for a model in the collection.\r\n  // Override to customize the build\r\n  buildChildView(child, ChildViewClass, childViewOptions) {\r\n    const options = _.extend({model: child}, childViewOptions);\r\n    return new ChildViewClass(options);\r\n  },\r\n\r\n  _setupChildView(view) {\r\n    monitorViewEvents(view);\r\n\r\n    // We need to listen for if a view is destroyed in a way other\r\n    // than through the CollectionView.\r\n    // If this happens we need to remove the reference to the view\r\n    // since once a view has been destroyed we can not reuse it.\r\n    view.on('destroy', this.removeChildView, this);\r\n\r\n    // set up the child view event forwarding\r\n    this._proxyChildViewEvents(view);\r\n  },\r\n\r\n  // used by ViewMixin's `_childViewEventHandler`\r\n  _getImmediateChildren() {\r\n    return this.children._views;\r\n  },\r\n\r\n  // Overriding Backbone.View's `setElement` to handle\r\n  // if an el was previously defined. If so, the view might be\r\n  // attached on setElement.\r\n  setElement() {\r\n    const hasEl = !!this.el;\r\n\r\n    Backbone.View.prototype.setElement.apply(this, arguments);\r\n\r\n    if (hasEl) {\r\n      this._isAttached = isNodeAttached(this.el);\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  // Render children views.\r\n  render() {\r\n    if (this._isDestroyed) { return this; }\r\n    this.triggerMethod('before:render', this);\r\n\r\n    this._destroyChildren();\r\n\r\n    // After all children have been destroyed re-init the container\r\n    this.children._init();\r\n\r\n    if (this.collection) {\r\n      this._addChildModels(this.collection.models);\r\n    }\r\n\r\n    this._showChildren();\r\n\r\n    this._isRendered = true;\r\n\r\n    this.triggerMethod('render', this);\r\n    return this;\r\n  },\r\n\r\n  // Sorts the children then filters and renders the results.\r\n  sort() {\r\n    if (this._isDestroyed) { return this; }\r\n\r\n    if (!this.children.length) { return this; }\r\n\r\n    this._showChildren();\r\n\r\n    return this;\r\n  },\r\n\r\n  _showChildren() {\r\n    if (this.isEmpty()) {\r\n      this._showEmptyView();\r\n      return;\r\n    }\r\n\r\n    this._sortChildren();\r\n\r\n    this.filter();\r\n  },\r\n\r\n  // Returns true if the collectionView is considered empty.\r\n  // This is called twice during a render. Once to check the data,\r\n  // and again when views are filtered. Override this function to\r\n  // customize what empty means.\r\n  isEmpty(allViewsFiltered) {\r\n    return allViewsFiltered || !this.children.length;\r\n  },\r\n\r\n  _showEmptyView() {\r\n    const EmptyView = this._getEmptyView();\r\n\r\n    if (!EmptyView) {\r\n      return;\r\n    }\r\n\r\n    const options = this._getEmptyViewOptions();\r\n\r\n    this.emptyRegion.show(new EmptyView(options));\r\n  },\r\n\r\n  // Retrieve the empty view class\r\n  _getEmptyView() {\r\n    const emptyView = this.emptyView;\r\n\r\n    if (!emptyView) { return; }\r\n\r\n    return this._getView(emptyView);\r\n  },\r\n\r\n  // Remove the emptyView\r\n  _destroyEmptyView() {\r\n\r\n    // Only empty if a view is show so the region\r\n    // doesn't detach any other unrelated HTML\r\n    if (this.emptyRegion.hasView()) {\r\n      this.emptyRegion.empty();\r\n    }\r\n  },\r\n\r\n  //\r\n  _getEmptyViewOptions() {\r\n    const emptyViewOptions = this.emptyViewOptions || this.childViewOptions;\r\n\r\n    if (_.isFunction(emptyViewOptions)) {\r\n      return emptyViewOptions.call(this);\r\n    }\r\n\r\n    return emptyViewOptions;\r\n  },\r\n\r\n  // Sorts views by viewComparator and sets the children to the new order\r\n  _sortChildren() {\r\n    this.triggerMethod('before:sort', this);\r\n\r\n    let viewComparator = this.getComparator();\r\n\r\n    if (_.isFunction(viewComparator)) {\r\n      // Must use native bind to preserve length\r\n      viewComparator = viewComparator.bind(this);\r\n    }\r\n\r\n    this.children._sort(viewComparator);\r\n\r\n    this.triggerMethod('sort', this);\r\n  },\r\n\r\n  // Sets the view's `viewComparator` and applies the sort if the view is ready.\r\n  // To prevent the render pass `{ preventRender: true }` as the 2nd argument.\r\n  setComparator(comparator, {preventRender} = {}) {\r\n    const comparatorChanged = this.viewComparator !== comparator;\r\n    const shouldSort = comparatorChanged && !preventRender;\r\n\r\n    this.viewComparator = comparator;\r\n\r\n    if (shouldSort) {\r\n      this.sort();\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  // Clears the `viewComparator` and follows the same rules for rendering as `setComparator`.\r\n  removeComparator(options) {\r\n    return this.setComparator(null, options);\r\n  },\r\n\r\n  // If viewComparator is overriden it will be returned here.\r\n  // Additionally override this function to provide custom\r\n  // viewComparator logic\r\n  getComparator() {\r\n    return this.viewComparator || this._viewComparator;\r\n  },\r\n\r\n  // Default internal view comparator that order the views by\r\n  // the order of the collection\r\n  _viewComparator(view) {\r\n    if (!this.collection) { return; }\r\n    return this.collection.indexOf(view.model);\r\n  },\r\n\r\n  // This method re-filters the children views and re-renders the results\r\n  filter() {\r\n    if (this._isDestroyed) { return this; }\r\n\r\n    if (!this.children.length) { return this; }\r\n\r\n    const filteredViews = this._filterChildren();\r\n\r\n    this._renderChildren(filteredViews);\r\n\r\n    return this;\r\n  },\r\n\r\n  _filterChildren() {\r\n    const viewFilter = this._getFilter();\r\n\r\n    if (!viewFilter) {\r\n      return this.children._views;\r\n    }\r\n\r\n    this.triggerMethod('before:filter', this);\r\n\r\n    const filteredViews = _.partition(this.children._views, _.bind(viewFilter, this));\r\n\r\n    this._detachChildren(filteredViews[1]);\r\n\r\n    this.triggerMethod('filter', this);\r\n\r\n    return filteredViews[0];\r\n  },\r\n\r\n  // This method returns a function for the viewFilter\r\n  _getFilter() {\r\n    const viewFilter = this.getFilter();\r\n\r\n    if (!viewFilter) { return false; }\r\n\r\n    if (_.isFunction(viewFilter)) {\r\n      return viewFilter;\r\n    }\r\n\r\n    // Support filter predicates `{ fooFlag: true }`\r\n    if (_.isObject(viewFilter)) {\r\n      const matcher = _.matches(viewFilter);\r\n      return function(view) {\r\n        return matcher(view.model && view.model.attributes);\r\n      };\r\n    }\r\n\r\n    // Filter by model attribute\r\n    if (_.isString(viewFilter)) {\r\n      return function(view) {\r\n        return view.model && view.model.get(viewFilter);\r\n      };\r\n    }\r\n\r\n    throw new MarionetteError({\r\n      name: 'InvalidViewFilterError',\r\n      message: '\"viewFilter\" must be a function, predicate object literal, a string indicating a model attribute, or falsy'\r\n    });\r\n  },\r\n\r\n  // Override this function to provide custom\r\n  // viewFilter logic\r\n  getFilter() {\r\n    return this.viewFilter;\r\n  },\r\n\r\n  // Sets the view's `viewFilter` and applies the filter if the view is ready.\r\n  // To prevent the render pass `{ preventRender: true }` as the 2nd argument.\r\n  setFilter(filter, {preventRender} = {}) {\r\n    const filterChanged = this.viewFilter !== filter;\r\n    const shouldRender = filterChanged && !preventRender;\r\n\r\n    this.viewFilter = filter;\r\n\r\n    if (shouldRender) {\r\n      this.filter();\r\n    }\r\n\r\n    return this;\r\n  },\r\n\r\n  // Clears the `viewFilter` and follows the same rules for rendering as `setFilter`.\r\n  removeFilter(options) {\r\n    return this.setFilter(null, options);\r\n  },\r\n\r\n  _detachChildren(detachingViews) {\r\n    _.each(detachingViews, _.bind(this._detachChildView, this));\r\n  },\r\n\r\n  _detachChildView(view) {\r\n    const shouldTriggerDetach = !!view._isAttached;\r\n    if (shouldTriggerDetach) {\r\n      triggerMethodOn(view, 'before:detach', view);\r\n    }\r\n\r\n    this.detachHtml(view);\r\n\r\n    if (shouldTriggerDetach) {\r\n      view._isAttached = false;\r\n      triggerMethodOn(view, 'detach', view);\r\n    }\r\n  },\r\n\r\n  // Override this method to change how the collectionView detaches a child view\r\n  detachHtml(view) {\r\n    this.detachEl(view.el);\r\n  },\r\n\r\n  _renderChildren(views) {\r\n    if (this.isEmpty(!views.length)) {\r\n      this._showEmptyView();\r\n      return;\r\n    }\r\n\r\n    this._destroyEmptyView();\r\n\r\n    this.triggerMethod('before:render:children', this, views);\r\n\r\n    const els = this._getBuffer(views);\r\n\r\n    this._attachChildren(els, views);\r\n\r\n    this.triggerMethod('render:children', this, views);\r\n  },\r\n\r\n  _attachChildren(els, views) {\r\n    const shouldTriggerAttach = !!this._isAttached;\r\n\r\n    views = shouldTriggerAttach ? views : [];\r\n\r\n    _.each(views, view => {\r\n      if (view._isAttached) { return; }\r\n      triggerMethodOn(view, 'before:attach', view);\r\n    });\r\n\r\n    this.attachHtml(this, els);\r\n\r\n    _.each(views, view => {\r\n      if (view._isAttached) { return; }\r\n      view._isAttached = true;\r\n      triggerMethodOn(view, 'attach', view);\r\n    });\r\n  },\r\n\r\n  // Renders each view in children and creates a fragment buffer from them\r\n  _getBuffer(views) {\r\n    const elBuffer = this.createBuffer();\r\n\r\n    _.each(views, view => {\r\n      renderView(view);\r\n      this.appendChildren(elBuffer, view.el);\r\n    });\r\n\r\n    return elBuffer;\r\n  },\r\n\r\n  // Override this method to do something other than `.append`.\r\n  // You can attach any HTML at this point including the els.\r\n  attachHtml(collectionView, els) {\r\n    this.appendChildren(collectionView.el, els);\r\n  },\r\n\r\n  // Render the child's view and add it to the HTML for the collection view at a given index, based on the current sort\r\n  addChildView(view, index) {\r\n    if (!view || view._isDestroyed) {\r\n      return view;\r\n    }\r\n\r\n    this._addChild(view, index);\r\n    this._showChildren();\r\n\r\n    return view;\r\n  },\r\n\r\n  // Detach a view from the children.  Best used when adding a\r\n  // childView from `addChildView`\r\n  detachChildView(view) {\r\n    this.removeChildView(view, { shouldDetach: true });\r\n\r\n    return view;\r\n  },\r\n\r\n  // Remove the child view and destroy it.  Best used when adding a\r\n  // childView from `addChildView`\r\n  // The options argument is for internal use only\r\n  removeChildView(view, options) {\r\n    if (!view) {\r\n      return view;\r\n    }\r\n\r\n    this._removeChildView(view, options);\r\n\r\n    this._removeChild(view);\r\n\r\n    if (this.isEmpty()) {\r\n      this._showEmptyView();\r\n    }\r\n\r\n    return view;\r\n  },\r\n\r\n  _removeChildViews(views) {\r\n    _.each(views, _.bind(this._removeChildView, this));\r\n  },\r\n\r\n  _removeChildView(view, {shouldDetach} = {}) {\r\n    view.off('destroy', this.removeChildView, this);\r\n\r\n    if (shouldDetach) {\r\n      this._detachChildView(view);\r\n    } else {\r\n      this._destroyChildView(view);\r\n    }\r\n\r\n    this.stopListening(view);\r\n  },\r\n\r\n  _destroyChildView(view) {\r\n    if (view._isDestroyed) {\r\n      return;\r\n    }\r\n\r\n    destroyView(view);\r\n  },\r\n\r\n  // called by ViewMixin destroy\r\n  _removeChildren() {\r\n    this._destroyChildren();\r\n    this.emptyRegion.destroy();\r\n  },\r\n\r\n  // Destroy the child views that this collection view is holding on to, if any\r\n  _destroyChildren() {\r\n    if (!this.children || !this.children.length) {\r\n      return;\r\n    }\r\n\r\n    this.triggerMethod('before:destroy:children', this);\r\n    _.each(this.children._views, _.bind(this._removeChildView, this));\r\n    this.triggerMethod('destroy:children', this);\r\n  }\r\n});\r\n\r\n_.extend(CollectionView.prototype, ViewMixin);\r\n\r\nexport default CollectionView;\r\n","// Composite View\r\n// --------------\r\n\r\nimport _ from 'underscore';\r\nimport deprecate from './utils/deprecate';\r\nimport MarionetteError from './error';\r\nimport CollectionView from './collection-view';\r\nimport View from './view';\r\n\r\nconst ClassOptions = [\r\n  'childViewContainer',\r\n  'template',\r\n  'templateContext'\r\n];\r\n\r\n// Used for rendering a branch-leaf, hierarchical structure.\r\n// Extends directly from CollectionView\r\n// @deprecated\r\nconst CompositeView = CollectionView.extend({\r\n\r\n  // Setting up the inheritance chain which allows changes to\r\n  // Marionette.CollectionView.prototype.constructor which allows overriding\r\n  // option to pass '{sort: false}' to prevent the CompositeView from\r\n  // maintaining the sorted order of the collection.\r\n  // This will fallback onto appending childView's to the end.\r\n  constructor(options) {\r\n    deprecate('CompositeView is deprecated. Convert to View at your earliest convenience');\r\n\r\n    this.mergeOptions(options, ClassOptions);\r\n\r\n    CollectionView.prototype.constructor.apply(this, arguments);\r\n  },\r\n\r\n  // Configured the initial events that the composite view\r\n  // binds to. Override this method to prevent the initial\r\n  // events, or to add your own initial events.\r\n  _initialEvents() {\r\n\r\n    // Bind only after composite view is rendered to avoid adding child views\r\n    // to nonexistent childViewContainer\r\n\r\n    if (this.collection) {\r\n      this.listenTo(this.collection, 'add', this._onCollectionAdd);\r\n      this.listenTo(this.collection, 'update', this._onCollectionUpdate);\r\n      this.listenTo(this.collection, 'reset', this.renderChildren);\r\n\r\n      if (this.sort) {\r\n        this.listenTo(this.collection, 'sort', this._sortViews);\r\n      }\r\n    }\r\n  },\r\n\r\n  // Retrieve the `childView` to be used when rendering each of\r\n  // the items in the collection. The default is to return\r\n  // `this.childView` or Marionette.CompositeView if no `childView`\r\n  // has been defined. As happens in CollectionView, `childView` can\r\n  // be a function (which should return a view class).\r\n  _getChildView(child) {\r\n    let childView = this.childView;\r\n\r\n    // for CompositeView, if `childView` is not specified, we'll get the same\r\n    // composite view class rendered for each child in the collection\r\n    // then check if the `childView` is a view class (the common case)\r\n    // finally check if it's a function (which we assume that returns a view class)\r\n    if (!childView) {\r\n      return this.constructor;\r\n    }\r\n\r\n    childView = this._getView(childView, child);\r\n\r\n    if (!childView) {\r\n      throw new MarionetteError({\r\n        name: 'InvalidChildViewError',\r\n        message: '\"childView\" must be a view class or a function that returns a view class'\r\n      });\r\n    }\r\n\r\n    return childView;\r\n  },\r\n\r\n  // Return the serialized model\r\n  serializeData() {\r\n    return this.serializeModel();\r\n  },\r\n\r\n  // Renders the model and the collection.\r\n  render() {\r\n    if (this._isDestroyed) { return this; }\r\n    this._isRendering = true;\r\n    this.resetChildViewContainer();\r\n\r\n    this.triggerMethod('before:render', this);\r\n\r\n    this._renderTemplate();\r\n    this.bindUIElements();\r\n    this.renderChildren();\r\n\r\n    this._isRendering = false;\r\n    this._isRendered = true;\r\n    this.triggerMethod('render', this);\r\n    return this;\r\n  },\r\n\r\n  renderChildren() {\r\n    if (this._isRendered || this._isRendering) {\r\n      CollectionView.prototype._renderChildren.call(this);\r\n    }\r\n  },\r\n\r\n  // You might need to override this if you've overridden attachHtml\r\n  attachBuffer(compositeView, buffer) {\r\n    const $container = this.getChildViewContainer(compositeView);\r\n    this.appendChildren($container, buffer);\r\n  },\r\n\r\n  // Internal method. Append a view to the end of the $el.\r\n  // Overidden from CollectionView to ensure view is appended to\r\n  // childViewContainer\r\n  _insertAfter(childView) {\r\n    const $container = this.getChildViewContainer(this, childView);\r\n    this.appendChildren($container, childView.el);\r\n  },\r\n\r\n  // Internal method. Append reordered childView'.\r\n  // Overidden from CollectionView to ensure reordered views\r\n  // are appended to childViewContainer\r\n  _appendReorderedChildren(children) {\r\n    const $container = this.getChildViewContainer(this);\r\n    this.appendChildren($container, children);\r\n  },\r\n\r\n  // Internal method to ensure an `$childViewContainer` exists, for the\r\n  // `attachHtml` method to use.\r\n  getChildViewContainer(containerView, childView) {\r\n    if (!!containerView.$childViewContainer) {\r\n      return containerView.$childViewContainer;\r\n    }\r\n\r\n    let container;\r\n    const childViewContainer = containerView.childViewContainer;\r\n    if (childViewContainer) {\r\n\r\n      const selector = _.result(containerView, 'childViewContainer');\r\n\r\n      if (selector.charAt(0) === '@' && containerView.ui) {\r\n        container = containerView.ui[selector.substr(4)];\r\n      } else {\r\n        container = this.findEls(selector, containerView.$el);\r\n      }\r\n\r\n      if (container.length <= 0) {\r\n        throw new MarionetteError({\r\n          name: 'ChildViewContainerMissingError',\r\n          message: `The specified \"childViewContainer\" was not found: ${containerView.childViewContainer}`\r\n        });\r\n      }\r\n\r\n    } else {\r\n      container = containerView.$el;\r\n    }\r\n\r\n    containerView.$childViewContainer = container;\r\n    return container;\r\n  },\r\n\r\n  // Internal method to reset the `$childViewContainer` on render\r\n  resetChildViewContainer() {\r\n    if (this.$childViewContainer) {\r\n      this.$childViewContainer = undefined;\r\n    }\r\n  }\r\n});\r\n\r\n// To prevent duplication but allow the best View organization\r\n// Certain View methods are mixed directly into the deprecated CompositeView\r\nconst MixinFromView = _.pick(View.prototype, 'serializeModel', 'getTemplate', '_renderTemplate', '_renderHtml', 'mixinTemplateContext', 'attachElContent');\r\n_.extend(CompositeView.prototype, MixinFromView);\r\n\r\nexport default CompositeView;\r\n","// Behavior\r\n// --------\r\n\r\n// A Behavior is an isolated set of DOM /\r\n// user interactions that can be mixed into any View.\r\n// Behaviors allow you to blackbox View specific interactions\r\n// into portable logical chunks, keeping your views simple and your code DRY.\r\n\r\nimport _ from 'underscore';\r\nimport deprecate from './utils/deprecate';\r\nimport getUniqueEventName from './utils/get-unique-event-name';\r\nimport MarionetteObject from './object';\r\nimport DelegateEntityEventsMixin from './mixins/delegate-entity-events';\r\nimport TriggersMixin from './mixins/triggers';\r\nimport UIMixin from './mixins/ui';\r\n\r\nconst ClassOptions = [\r\n  'collectionEvents',\r\n  'events',\r\n  'modelEvents',\r\n  'triggers',\r\n  'ui'\r\n];\r\n\r\nconst Behavior = MarionetteObject.extend({\r\n  cidPrefix: 'mnb',\r\n\r\n  constructor(options, view) {\r\n    // Setup reference to the view.\r\n    // this comes in handle when a behavior\r\n    // wants to directly talk up the chain\r\n    // to the view.\r\n    this.view = view;\r\n\r\n    if (this.defaults) {\r\n      deprecate('Behavior defaults are deprecated. For similar functionality set options on the Behavior class.');\r\n    }\r\n\r\n    this.defaults = _.clone(_.result(this, 'defaults', {}));\r\n\r\n    this._setOptions(this.defaults, options);\r\n    this.mergeOptions(this.options, ClassOptions);\r\n\r\n    // Construct an internal UI hash using\r\n    // the behaviors UI hash and then the view UI hash.\r\n    // This allows the user to use UI hash elements\r\n    // defined in the parent view as well as those\r\n    // defined in the given behavior.\r\n    // This order will help the reuse and share of a behavior\r\n    // between multiple views, while letting a view override a\r\n    // selector under an UI key.\r\n    this.ui = _.extend({}, _.result(this, 'ui'), _.result(view, 'ui'));\r\n\r\n    MarionetteObject.apply(this, arguments);\r\n  },\r\n\r\n  // proxy behavior $ method to the view\r\n  // this is useful for doing jquery DOM lookups\r\n  // scoped to behaviors view.\r\n  $() {\r\n    return this.view.$.apply(this.view, arguments);\r\n  },\r\n\r\n  // Stops the behavior from listening to events.\r\n  // Overrides Object#destroy to prevent additional events from being triggered.\r\n  destroy() {\r\n    this.stopListening();\r\n\r\n    this.view._removeBehavior(this);\r\n\r\n    return this;\r\n  },\r\n\r\n  proxyViewProperties() {\r\n    this.$el = this.view.$el;\r\n    this.el = this.view.el;\r\n\r\n    return this;\r\n  },\r\n\r\n  bindUIElements() {\r\n    this._bindUIElements();\r\n\r\n    return this;\r\n  },\r\n\r\n  unbindUIElements() {\r\n    this._unbindUIElements();\r\n\r\n    return this;\r\n  },\r\n\r\n  getUI(name) {\r\n    return this._getUI(name);\r\n  },\r\n\r\n  // Handle `modelEvents`, and `collectionEvents` configuration\r\n  delegateEntityEvents() {\r\n    this._delegateEntityEvents(this.view.model, this.view.collection);\r\n\r\n    return this;\r\n  },\r\n\r\n  undelegateEntityEvents() {\r\n    this._undelegateEntityEvents(this.view.model, this.view.collection);\r\n\r\n    return this;\r\n  },\r\n\r\n  getEvents() {\r\n    // Normalize behavior events hash to allow\r\n    // a user to use the @ui. syntax.\r\n    const behaviorEvents = this.normalizeUIKeys(_.result(this, 'events'));\r\n\r\n    // binds the handler to the behavior and builds a unique eventName\r\n    return _.reduce(behaviorEvents, (events, behaviorHandler, key) => {\r\n      if (!_.isFunction(behaviorHandler)) {\r\n        behaviorHandler = this[behaviorHandler];\r\n      }\r\n      if (!behaviorHandler) { return; }\r\n      key = getUniqueEventName(key);\r\n      events[key] = _.bind(behaviorHandler, this);\r\n      return events;\r\n    }, {});\r\n  },\r\n\r\n  // Internal method to build all trigger handlers for a given behavior\r\n  getTriggers() {\r\n    if (!this.triggers) { return; }\r\n\r\n    // Normalize behavior triggers hash to allow\r\n    // a user to use the @ui. syntax.\r\n    const behaviorTriggers = this.normalizeUIKeys(_.result(this, 'triggers'));\r\n\r\n    return this._getViewTriggers(this.view, behaviorTriggers);\r\n  }\r\n\r\n});\r\n\r\n_.extend(Behavior.prototype, DelegateEntityEventsMixin, TriggersMixin, UIMixin);\r\n\r\nexport default Behavior;\r\n","// Application\r\n// -----------\r\nimport buildRegion from './common/build-region';\r\nimport MarionetteObject from './object';\r\nimport Region from './region';\r\n\r\nconst ClassOptions = [\r\n  'region',\r\n  'regionClass'\r\n];\r\n\r\n// A container for a Marionette application.\r\nconst Application = MarionetteObject.extend({\r\n  cidPrefix: 'mna',\r\n\r\n  constructor(options) {\r\n    this._setOptions(options);\r\n\r\n    this.mergeOptions(options, ClassOptions);\r\n\r\n    this._initRegion();\r\n\r\n    MarionetteObject.prototype.constructor.apply(this, arguments);\r\n  },\r\n\r\n  regionClass: Region,\r\n\r\n  _initRegion() {\r\n    const region = this.region;\r\n\r\n    if (!region) { return; }\r\n\r\n    const defaults = {\r\n      regionClass: this.regionClass\r\n    };\r\n\r\n    this._region = buildRegion(region, defaults);\r\n  },\r\n\r\n  getRegion() {\r\n    return this._region;\r\n  },\r\n\r\n  showView(view, ...args) {\r\n    const region = this.getRegion();\r\n    return region.show(view, ...args);\r\n  },\r\n\r\n  getView() {\r\n    return this.getRegion().currentView;\r\n  },\r\n\r\n  // kick off all of the application's processes.\r\n  start(options) {\r\n    this.triggerMethod('before:start', this, options);\r\n    this.triggerMethod('start', this, options);\r\n    return this;\r\n  }\r\n\r\n});\r\n\r\nexport default Application;\r\n","// App Router\r\n// ----------\r\n\r\n// Reduce the boilerplate code of handling route events\r\n// and then calling a single method on another object,\r\n// called a controller.\r\n// Have your routers configured to call the method on\r\n// your controller, directly.\r\n//\r\n// Configure an AppRouter with `appRoutes`.\r\n//\r\n// App routers can only take one `controller` object.\r\n// It is recommended that you divide your controller\r\n// objects in to smaller pieces of related functionality\r\n// and have multiple routers / controllers, instead of\r\n// just one giant router and controller.\r\n//\r\n// You can also add standard routes to an AppRouter.\r\n\r\nimport Backbone from 'backbone';\r\nimport _ from 'underscore';\r\nimport { triggerMethod } from './common/trigger-method';\r\nimport MarionetteError from './error';\r\nimport CommonMixin from './mixins/common';\r\n\r\nconst ClassOptions = [\r\n  'appRoutes',\r\n  'controller'\r\n];\r\n\r\nconst AppRouter = Backbone.Router.extend({\r\n\r\n  constructor(options) {\r\n    this._setOptions(options);\r\n\r\n    this.mergeOptions(options, ClassOptions);\r\n\r\n    Backbone.Router.apply(this, arguments);\r\n\r\n    const appRoutes = this.appRoutes;\r\n    const controller = this._getController();\r\n    this.processAppRoutes(controller, appRoutes);\r\n    this.on('route', this._processOnRoute, this);\r\n  },\r\n\r\n  // Similar to route method on a Backbone Router but\r\n  // method is called on the controller\r\n  appRoute(route, methodName) {\r\n    const controller = this._getController();\r\n    this._addAppRoute(controller, route, methodName);\r\n    return this;\r\n  },\r\n\r\n  // process the route event and trigger the onRoute\r\n  // method call, if it exists\r\n  _processOnRoute(routeName, routeArgs) {\r\n    // make sure an onRoute before trying to call it\r\n    if (_.isFunction(this.onRoute)) {\r\n      // find the path that matches the current route\r\n      const routePath = _.invert(this.appRoutes)[routeName];\r\n      this.onRoute(routeName, routePath, routeArgs);\r\n    }\r\n  },\r\n\r\n  // Internal method to process the `appRoutes` for the\r\n  // router, and turn them in to routes that trigger the\r\n  // specified method on the specified `controller`.\r\n  processAppRoutes(controller, appRoutes) {\r\n    if (!appRoutes) { return this; }\r\n\r\n    const routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes\r\n\r\n    _.each(routeNames, route => {\r\n      this._addAppRoute(controller, route, appRoutes[route]);\r\n    });\r\n\r\n    return this;\r\n  },\r\n\r\n  _getController() {\r\n    return this.controller;\r\n  },\r\n\r\n  _addAppRoute(controller, route, methodName) {\r\n    const method = controller[methodName];\r\n\r\n    if (!method) {\r\n      throw new MarionetteError(`Method \"${methodName}\" was not found on the controller`);\r\n    }\r\n\r\n    this.route(route, methodName, _.bind(method, controller));\r\n  },\r\n\r\n  triggerMethod: triggerMethod\r\n});\r\n\r\n_.extend(AppRouter.prototype, CommonMixin);\r\n\r\nexport default AppRouter;\r\n","import MarionetteError from '../error';\r\n\r\n// Placeholder method to be extended by the user.\r\n// The method should define the object that stores the behaviors.\r\n// i.e.\r\n//\r\n// ```js\r\n// Marionette.Behaviors.behaviorsLookup: function() {\r\n//   return App.Behaviors\r\n// }\r\n// ```\r\nexport default function behaviorsLookup() {\r\n  throw new MarionetteError({\r\n    message: 'You must define where your behaviors are stored.',\r\n    url: 'marionette.behaviors.md#behaviorslookup'\r\n  });\r\n}\r\n","import Backbone from 'backbone';\r\nimport {version} from '../package.json';\r\n\r\nimport proxy from './utils/proxy';\r\nimport extend from './utils/extend';\r\nimport deprecate from './utils/deprecate';\r\n\r\nimport isNodeAttached from './common/is-node-attached';\r\nimport mergeOptions from './common/merge-options';\r\nimport getOption from './common/get-option';\r\nimport normalizeMethods from './common/normalize-methods';\r\nimport monitorViewEvents from './common/monitor-view-events';\r\n\r\nimport {\r\n  bindEvents,\r\n  unbindEvents\r\n} from './common/bind-events';\r\n\r\nimport {\r\n  bindRequests,\r\n  unbindRequests\r\n} from './common/bind-requests';\r\n\r\nimport {\r\n  triggerMethod,\r\n  triggerMethodOn\r\n} from './common/trigger-method';\r\n\r\n\r\nimport MarionetteObject from './object';\r\nimport TemplateCache from './template-cache';\r\nimport View from './view';\r\nimport CollectionView from './collection-view';\r\nimport NextCollectionView from './next-collection-view';\r\nimport CompositeView from './composite-view';\r\nimport Behavior from './behavior';\r\nimport Region from './region';\r\nimport Application from './application';\r\nimport AppRouter from './app-router';\r\nimport MarionetteError from './error';\r\n\r\nimport behaviorsLookup from './config/behaviors-lookup';\r\nimport Renderer from './config/renderer';\r\n\r\nimport {\r\n  FEATURES,\r\n  isEnabled,\r\n  setEnabled\r\n} from './config/features';\r\n\r\nconst previousMarionette = Backbone.Marionette;\r\nconst Marionette = Backbone.Marionette = {};\r\n\r\n// This allows you to run multiple instances of Marionette on the same\r\n// webapp. After loading the new version, call `noConflict()` to\r\n// get a reference to it. At the same time the old version will be\r\n// returned to Backbone.Marionette.\r\nMarionette.noConflict = function() {\r\n  Backbone.Marionette = previousMarionette;\r\n  return this;\r\n};\r\n\r\n// Utilities\r\nMarionette.bindEvents = proxy(bindEvents);\r\nMarionette.unbindEvents = proxy(unbindEvents);\r\nMarionette.bindRequests = proxy(bindRequests);\r\nMarionette.unbindRequests = proxy(unbindRequests);\r\nMarionette.mergeOptions = proxy(mergeOptions);\r\nMarionette.getOption = proxy(getOption);\r\nMarionette.normalizeMethods = proxy(normalizeMethods);\r\nMarionette.extend = extend;\r\nMarionette.isNodeAttached = isNodeAttached;\r\nMarionette.deprecate = deprecate;\r\nMarionette.triggerMethod = proxy(triggerMethod);\r\nMarionette.triggerMethodOn = triggerMethodOn;\r\nMarionette.isEnabled = isEnabled;\r\nMarionette.setEnabled = setEnabled;\r\nMarionette.monitorViewEvents = monitorViewEvents;\r\n\r\nMarionette.Behaviors = {};\r\nMarionette.Behaviors.behaviorsLookup = behaviorsLookup;\r\n\r\n// Classes\r\nMarionette.Application = Application;\r\nMarionette.AppRouter = AppRouter;\r\nMarionette.Renderer = Renderer;\r\nMarionette.TemplateCache = TemplateCache;\r\nMarionette.View = View;\r\nMarionette.CollectionView = CollectionView;\r\nMarionette.NextCollectionView = NextCollectionView;\r\nMarionette.CompositeView = CompositeView;\r\nMarionette.Behavior = Behavior;\r\nMarionette.Region = Region;\r\nMarionette.Error = MarionetteError;\r\nMarionette.Object = MarionetteObject;\r\n\r\n// Configuration\r\nMarionette.DEV_MODE = false;\r\nMarionette.FEATURES = FEATURES;\r\nMarionette.VERSION = version;\r\n\r\nexport default Marionette;\r\n"],"names":["proxy","method","context","args","apply","extend","Backbone","Model","deprecate","message","test","_","isObject","prev","next","url","Marionette","DEV_MODE","undefined","_cache","_warn","_console","console","warn","log","noop","arguments","isNodeAttached","el","document","documentElement","contains","parentNode","mergeOptions","options","keys","each","key","option","getOption","optionName","normalizeMethods","hash","reduce","normalizedHash","name","isFunction","splitter","getEventName","match","prefix","eventName","toUpperCase","getOnMethodName","memoize","event","replace","triggerMethod","methodName","call","result","trigger","triggerMethodOn","triggerMethodChildren","view","shouldTrigger","_getImmediateChildren","child","shouldTriggerAttach","_isAttached","shouldAttach","shouldTriggerDetach","shouldDetach","triggerDOMRefresh","_isRendered","triggerDOMRemove","handleBeforeAttach","handleAttach","handleBeforeDetach","handleDetach","handleBeforeRender","handleRender","monitorViewEvents","_areViewEventsMonitored","on","errorProps","MarionetteError","Error","version","error","pick","captureStackTrace","urlRoot","bindFromStrings","target","entity","evt","methods","actionName","methodNames","split","iterateEvents","bindings","isString","bindEvents","unbindEvents","iterateReplies","channel","normalizedRadioRequests","bindRequests","unbindRequests","setOptions","channelName","Radio","_channel","radioEvents","radioRequests","_destroyRadio","stopReplying","ClassOptions","MarionetteObject","hasOwnProperty","_setOptions","_setCid","_initRadio","initialize","prototype","Events","CommonMixin","RadioMixin","_isDestroyed","cid","uniqueId","cidPrefix","stopListening","createDocumentFragment","children","$","append","sibling","before","newEl","oldEl","parent","replaceChild","contents","detach","html","remove","selector","TemplateCache","templateId","cachedTemplate","templateCaches","load","i","length","DomMixin","compiledTemplate","template","loadTemplate","compileTemplate","$template","findEls","rawTemplate","invokeMap","invoke","getBehaviorClass","behaviorClass","Behaviors","behaviorsLookup","parseBehaviors","behaviors","chain","map","BehaviorClass","_options","behavior","nestedBehaviors","concat","flatten","value","_behaviors","_getBehaviors","triggers","_invoke","memo","_triggers","events","_events","without","model","collection","_undelegateEntityEvents","modelEvents","collectionEvents","delegateEventSplitter","uniqueName","join","getUniqueEventName","FEATURES","isEnabled","setEnabled","state","buildViewTrigger","triggerDef","shouldPreventDefault","preventDefault","shouldStopPropagation","stopPropagation","normalizeUIKeys","ui","val","normalizedKey","normalizeUIString","uiString","r","slice","normalizeUIValues","properties","isArray","property","propertyVal","uiBindings","_getUIBindings","_uiBindings","_ui","$el","ViewMixin","eventsArg","_proxyBehaviorViewProperties","_buildEventProxies","viewEvents","_getEvents","combinedEvents","_getBehaviorEvents","_getBehaviorTriggers","getTriggers","View","delegateEvents","_getViewTriggers","_delegateEntityEvents","_delegateBehaviorEntityEvents","_undelegateBehaviorEntityEvents","unbindUIElements","removeEl","_removeChildren","_destroyBehaviors","_bindUIElements","_bindBehaviorUIElements","_unbindUIElements","_unbindBehaviorUIElements","_getUI","ret","_triggerEventOnBehaviors","_childViewEvents","_childViewTriggers","listenTo","_childViewEventHandler","childViewEvents","childViewTriggers","childEventName","BehaviorsMixin","DelegateEntityEventsMixin","TriggersMixin","UIMixin","renderView","supportsRenderLifecycle","render","destroyView","destroy","supportsDestroyLifecycle","Region","_initEl","getEl","_ensureElement","_getView","currentView","_isSwappingView","empty","_setupChildView","_attachView","_proxyChildViewEvents","_empty","parentView","_parentView","shouldReplaceEl","replaceElement","_replaceEl","attachHtml","allowMissingEl","viewOptions","_getViewOptions","_restoreEl","replaceEl","_isReplaced","_detachView","appendChildren","detachHtml","shouldDestroy","preventDestroy","off","removeView","_stopChildViewEvents","shouldRestoreEl","detachContents","reset","_name","_removeReferences","definition","defaults","buildRegionFromDefinition","opts","buildRegionFromObject","regionClass","RegionClass","omit","regions","_regions","addRegions","isEmpty","_addRegions","regionDefinitions","partial","buildRegion","_addRegion","region","_removeRegion","_getRegions","bind","getRegions","getRegion","clone","show","detachView","Renderer","data","templateFunc","get","_initBehaviors","_initRegions","Array","constructor","delegateEntityEvents","serializeModel","serializeCollection","attributes","hasEl","setElement","bindUIElements","_reInitRegions","_renderTemplate","getTemplate","mixinTemplateContext","serializeData","_renderHtml","attachElContent","templateContext","setInnerContent","removeRegions","compact","renderer","RegionsMixin","emulateCollection","object","listProperty","list","Container","views","_views","_indexByModel","_indexByCustom","_updateLength","add","values","customIndex","_add","viewCid","findByModelCid","modelCid","findByCid","index","_remove","some","size","CollectionView","once","_initialEvents","_initChildViewStorage","_bufferedChildren","_isBuffering","triggerOnChildren","attachBuffer","_createBuffer","_onCollectionAdd","_onCollectionUpdate","sort","_sortViews","at","indexOf","filter","_filteredSortedModels","_shouldAddChild","_destroyEmptyView","_addChild","changes","_removeChildModels","removed","models","removedViews","_getRemovedViews","_updateIndices","_showEmptyView","removingViews","findByModel","_removeChildView","push","_renderChildren","preventRender","canBeRendered","filterChanged","shouldRender","previousModels","_applyModelDeltas","setFilter","currentIds","addedChildNotExists","removeModels","prevModel","_showingEmptyView","anyModelsAdded","filteredOutModels","elsToReorder","viewEls","_index","_appendReorderedChildren","reorderOnSort","reorder","orderChanged","find","item","resortView","_destroyChildren","processedModels","_startBuffering","_showCollection","_endBuffering","ChildView","_getChildView","childViewOptions","_getChildViewOptions","buildChildView","addedAt","viewComparator","getViewComparator","Math","min","max","addedModel","_sortModelsBy","splice","_filterModels","comparator","sortBy","EmptyView","_getEmptyView","emptyViewOptions","_emptyViewIndex","addChildView","emptyView","childView","_createView","increment","laterView","ChildViewClass","collectionView","buffer","elBuffer","createBuffer","b","_insertBefore","_insertAfter","findPosition","beforeEl","ChildViewContainer","_init","stringComparator","_viewsByCid","_sortBy","sortedViews","_set","findIndexByView","_initEmptyRegion","emptyRegion","_onCollectionSort","_onCollectionReset","sortWithCollection","hasAddedModel","_addChildModels","added","_detachChildren","_showChildren","_removeChildViews","_removeChildModel","_removeChild","_addChildModel","_createChildView","removeChildView","_sortChildren","allViewsFiltered","_getEmptyViewOptions","hasView","getComparator","_sort","comparatorChanged","shouldSort","setComparator","_viewComparator","filteredViews","_filterChildren","viewFilter","_getFilter","partition","getFilter","matcher","matches","detachingViews","_detachChildView","detachEl","els","_getBuffer","_attachChildren","_destroyChildView","CompositeView","renderChildren","_isRendering","resetChildViewContainer","compositeView","$container","getChildViewContainer","containerView","$childViewContainer","container","childViewContainer","charAt","substr","MixinFromView","Behavior","_removeBehavior","behaviorEvents","behaviorHandler","behaviorTriggers","Application","_initRegion","_region","AppRouter","Router","appRoutes","controller","_getController","processAppRoutes","_processOnRoute","route","_addAppRoute","routeName","routeArgs","onRoute","routePath","invert","routeNames","reverse","previousMarionette","noConflict","NextCollectionView","Object","VERSION"],"mappings":"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"}